<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <head>
        <head>
            <head>
                <title>WarabaGuinée</title>
                <link rel="icon" type="image/png" sizes="32x32" href="/static/lo.jpeg">
                <link rel="icon" type="image/png" sizes="48x48" href="/static/lo.jpeg">
                <link rel="icon" type="image/png" sizes="96x96" href="/sta nbhi j^$=ûiopà)^tic/lo.jpeg">
                <link rel="icon" type="image/png" sizes="192x192" href="/static/lo.jpeg">
                <link rel="icon" type="image/png" sizes="512x512" href="/static/lo.jpeg">
            </head>
            
        </head>
        
    </head>
    {% load static %}
   <!-- Meta Informations -->
<meta name="csrf-token" content="{{ csrf_token }}"> <!-- Ajoute le token CSRF -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Fonts (Material Icons) -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Bootstrap CSS (dernière version stable) -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css">

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<!-- Swiper CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

<!-- Bootstrap JS (dernière version stable) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>

<!-- FontAwesome Kit (remplacez YOUR_KIT_CODE par votre clé) -->
<script src="https://kit.fontawesome.com/YOUR_KIT_CODE.js" crossorigin="anonymous"></script>

    <style>
         /* Global navbar styles */
         *,
        *::before,
        *::after {
            box-sizing: border-box;
        }
        :root {
            --background-color: #ffffff; /* Couleur de fond par défaut (light) */
            --text-color: #000000; /* Couleur du texte par défaut (light) */
            --overlay-color: rgba(0, 0, 0, 0.5); /* Couleur de l'overlay par défaut (light) */
            --button-bg-color: #ff6347; /* Couleur de fond du bouton par défaut (light) */
            --button-hover-bg-color: #ff4500; /* Couleur de fond du bouton au survol (light) */
            --dot-color: #000000; /* Couleur des points par défaut (light) */
            --active-dot-color: #ff6347; /* Couleur du point actif par défaut (light) */
            --shadow-color: rgba(255, 102, 0, 0.5); /* Couleur de l'ombre par défaut (light) */
            --bullet-color: rgba(0, 0, 0, 0.6); /* Couleur des bullets par défaut (light) */
            --active-bullet-color: #ff6600; /* Couleur du bullet actif par défaut (light) */
            --icon-color: #FF8C00; /* Couleur des icônes par défaut (light) */
            --card-bg-color: #f9f9f9; /* Couleur de fond des cartes (light) */
        }
        
        [data-theme="dark"] {
            --background-color: #121212; /* Couleur de fond pour le thème dark */
            --text-color: #ffffff; /* Couleur du texte pour le thème dark */
            --overlay-color: rgba(255, 255, 255, 0.5); /* Couleur de l'overlay pour le thème dark */
            --button-bg-color: #ff6347; /* Couleur de fond du bouton pour le thème dark */
            --button-hover-bg-color: #ff4500; /* Couleur de fond du bouton au survol pour le thème dark */
            --dot-color: #ffffff; /* Couleur des points pour le thème dark */
            --active-dot-color: #ff6347; /* Couleur du point actif pour le thème dark */
            --shadow-color: rgba(255, 102, 0, 0.7); /* Couleur de l'ombre pour le thème dark */
            --bullet-color: rgba(255, 255, 255, 0.8); /* Couleur des bullets pour le thème dark */
            --active-bullet-color: #ff6600; /* Couleur du bullet actif pour le thème dark */
            --icon-color: #FF8C00; /* Couleur des icônes pour le thème dark */
            --card-bg-color: #1e1e1e; /* Couleur de fond des cartes (dark) */
        }
        body {
                    font-family: 'Roboto', sans-serif;
                    line-height: 1.6;
                    transition: background-color 0.3s, color 0.3s;
                    background-color: var(--background-color);
                    color: var(--text-primary);
                    transition: all 0.3s ease;
        }

            

        html {
            scroll-behavior: smooth;
        }

            /* Styles pour l'icône de basculement de mode */
        .theme-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background-color: #fff;
            color: #000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;
        }

        /* Cacher l'icône sur les petits écrans */
        @media (max-width: 768px) {
            .theme-toggle {
                display: none;
            }
        }

        /* Styles pour l'icône de basculement de mode dans la sidebar mobile */
        .theme-toggle-mobile {
            width: 40px;
            height: 40px;
            background-color: #fff;
            color: #000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            margin: 20px auto; /* Centrer l'icône dans la sidebar */
            transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;
        }

        /* Mode sombre */
        [data-theme="dark"] .theme-toggle {
            background-color: #000;
            color: #fff;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.2);
        }

        /* Animation de l'icône */
        .theme-toggle i {
            font-size: 24px;
            transition: transform 0.3s ease, color 0.3s ease;
        }

        /* Effet de rotation au changement de thème */
        .theme-toggle:active i {
            transform: rotate(180deg);
        }

        /* Changement de couleur pour une meilleure visibilité */
        [data-theme="dark"] .theme-toggle i {
            color: #ffcc00; /* Jaune pour mieux contraster */
        }

        [data-theme="light"] .theme-toggle i {
            color: #222; /* Gris foncé pour plus de lisibilité */
        }

/* Styles de la navbar ---------------------------*/
/* Styles de base de la navbar */
.navbar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 2rem;
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    z-index: 1000;
    transition: all 0.3s ease;
    flex-wrap: nowrap;
}

/* Styles pour le mode clair */
[data-theme="light"] .navbar {
    background: linear-gradient(90deg, #FFB6C1, #ADD8E6); /* Dégradé rose clair vers bleu pastel */
}

[data-theme="light"] .navbar a {
    color: #000000; /* Texte en noir */
}

[data-theme="light"] .navbar .brand-name {
    color: #FF4500; /* Nom du logo en orange foncé */
}

[data-theme="light"] .navbar .nav-link {
    color: #000000; /* Texte en noir */
}

[data-theme="light"] .navbar .nav-link:hover {
    background: rgba(255, 111, 0, 0.1); /* Fond orange clair au survol */
    color: #FF6F00; /* Texte orange au survol */
}

[data-theme="light"] .navbar .search-input {
    background: rgba(255, 255, 255, 0.9); /* Fond blanc pour la recherche */
    color: #000000; /* Texte en noir */
    border: 1px solid rgba(0, 0, 0, 0.2); /* Bordure légère */
}

[data-theme="light"] .navbar .search-input:focus {
    border-color: #FF6F00; /* Bordure orange au focus */
    box-shadow: 0 0 10px rgba(255, 111, 0, 0.2); /* Ombre orange au focus */
}

[data-theme="light"] .navbar .search-input::placeholder {
    color: rgba(0, 0, 0, 0.6); /* Placeholder en gris foncé */
}

[data-theme="light"] .navbar .nav-link.panier {
    background-color: #FF6F00; /* Fond orange pour le panier */
    color: #ffffff; /* Icône blanche */
}

[data-theme="light"] .navbar .nav-link.panier:hover {
    background-color: #FF4500; /* Orange plus foncé au survol */
}

/* Styles pour le mode sombre */
[data-theme="dark"] .navbar {
    background: linear-gradient(90deg, #000000, #00FFFF); /* Dégradé noir vers cyan */
}

[data-theme="dark"] .navbar a {
    color: #ffffff; /* Texte en blanc */
}

[data-theme="dark"] .navbar .brand-name {
    color: #00FFFF; /* Cyan pour le nom de la marque */
}

[data-theme="dark"] .navbar .nav-link {
    color: #ffffff; /* Texte en blanc */
}

[data-theme="dark"] .navbar .nav-link:hover {
    background: rgba(0, 255, 255, 0.1); /* Fond cyan clair au survol */
    color: #00FFFF; /* Texte cyan au survol */
}

[data-theme="dark"] .navbar .search-input {
    background: rgba(0, 0, 0, 0.8); /* Fond noir pour la recherche */
    color: #ffffff; /* Texte en blanc */
    border: 1px solid rgba(255, 255, 255, 0.2); /* Bordure légère */
}

[data-theme="dark"] .navbar .search-input:focus {
    background: rgba(0, 0, 0, 0.9); /* Fond noir plus intense au focus */
    border-color: #00FFFF; /* Bordure cyan au focus */
    box-shadow: 0 0 10px rgba(0, 255, 255, 0.2); /* Ombre cyan au focus */
}

[data-theme="dark"] .navbar .search-input::placeholder {
    color: rgba(255, 255, 255, 0.7); /* Placeholder en gris clair */
}

[data-theme="dark"] .navbar .nav-link.panier {
    background-color: #00FFFF; /* Fond cyan pour le panier */
    color: #000000; /* Icône noire */
}

[data-theme="dark"] .navbar .nav-link.panier:hover {
    background-color: #00CED1; /* Cyan plus foncé au survol */
}

/* Styles pour le logo et le nom de la marque */
.navbar-brand {
    display: flex;
    align-items: center;
    gap: 1.2rem;
    text-decoration: none;
}

.nav-logo {
    width: 60px;
    height: 60px;
    border-radius: 15px;
    object-fit: cover;
    transition: all 0.3s ease;
    border: 2px solid #FF6F00;
    box-shadow: 0 4px 20px rgba(255, 111, 0, 0.3);
    background: linear-gradient(45deg, rgba(255, 111, 0, 0.1), rgba(255, 255, 255, 0.1));
    padding: 4px;
}

.nav-logo:hover {
    transform: scale(1.1);
    border-color: #FF9800;
    box-shadow: 0 6px 25px rgba(255, 111, 0, 0.5);
}

.brand-name {
    color: #FF6F00;
    font-size: 1.8rem;
    font-weight: 600;
    letter-spacing: 0.5px;
    text-shadow: 0 0 10px rgba(255, 111, 0, 0.2);
}

/* Styles pour la barre de recherche */
.search-wrapper {
    max-width: 400px;
    margin: 0 2rem;
    flex-grow: 1;
}

.search-box {
    position: relative;
    width: 100%;
}

.search-input {
    width: 100%;
    padding: 12px 45px 12px 40px; /* Plus d'espace à gauche */
    border-radius: 25px;
    font-size: 16px;
    transition: all 0.3s ease;
}

.search-icon {
    position: absolute;
    left: 15px; /* Ajustement de la position */
    top: 50%;
    transform: translateY(-50%);
    color: #FF6F00;
    font-size: 1rem;
    cursor: pointer;
}

/* Styles pour les liens de navigation */
.nav-menu {
    display: flex;
    align-items: center;
    gap: 1.5rem;
}

.nav-link {
    position: relative;
    display: flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.8rem 1.2rem;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 500;
    transition: all 0.3s ease;
}

.nav-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 111, 0, 0.1);
}

.nav-link i {
    font-size: 20px;
    margin-right: 8px;
}

/* Styles spécifiques pour le panier */
.nav-link.panier {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    text-decoration: none;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.cart-count {
    position: absolute;
    top: 0;
    right: 0;
    background-color: #ff3d00;
    color: white;
    width: 18px;
    height: 18px;
    font-size: 12px;
    font-weight: bold;
    text-align: center;
    line-height: 18px;
    border-radius: 50%;
    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);
    transform: translate(30%, -35%);
}

/* Styles pour le bouton hamburger (mobile) */
.hamburger-btn {
    display: none;
    background: none;
    border: none;
    color: #FF6F00;
    font-size: 1.5rem;
    cursor: pointer;
    z-index: 2001;
    transition: all 0.3s ease;
}

/* Responsive Design */
@media (max-width: 768px) {
    .navbar {
        padding: 0.8rem;
        flex-wrap: wrap;
    }

    .nav-menu {
        display: none;
        width: 100%;
        flex-direction: column;
        padding: 1rem 0;
        background: rgba(0, 0, 0, 0.98);
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        transform-origin: top;
        opacity: 0;
        transform: translateY(-10px);
        transition: all 0.3s ease-in-out;
    }

    .nav-menu.show {
        display: flex;
        opacity: 1;
        transform: translateY(0);
    }

    .search-wrapper {
        order: 3;
        flex: 1 1 100%;
        margin: 0.8rem 0;
    }

    .hamburger-btn {
        display: block;
        order: 2;
    }

    .user-menu {
        order: 1;
    }

    .nav-link {
        width: 100%;
        padding: 0.8rem 2rem;
        border-radius: 0;
        white-space: normal;
    }
    .brand-name {
        color: #FF6F00;
        font-size:16px;
        font-weight: 600;
        text-shadow: 0 0 10px rgba(255, 111, 0, 0.2);
    }
}

/* Animation pour le menu déroulant */
@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.nav-menu.show {
    animation: slideDown 0.3s ease-in-out;
}

    /* Style pour le modal */
    .modal-content {
        background: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 111, 0, 0.2);
        border-radius: 25px;
        color: white;
    }

    @keyframes modalOpen {
        from {
            opacity: 0;
            transform: scale(0.8);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    /* Responsive design */
    @media (max-width: 1024px) {
        .navbar {
            padding: 1rem;
        }
        
        .search-wrapper {
            flex: 0 1 300px;
            margin: 0 1rem;
        }
    }

    @media (max-width: 768px) {
        .navbar {
            padding: 0.8rem;
            flex-wrap: wrap;
        }

        .nav-menu {
            display: none;
            width: 100%;
            flex-direction: column;
            padding: 1rem 0;
            background: rgba(0, 0, 0, 0.98);
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            transform-origin: top;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease-in-out;
        }

        .nav-menu.show {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        .search-wrapper {
            order: 3;
            flex: 1 1 100%;
            margin: 0.8rem 0;
        }

        .hamburger-btn {
            display: block;
            order: 2;
        }

        .user-menu {
            order: 1;
        }

        .nav-link {
            width: 100%;
            padding: 0.8rem 2rem;
            border-radius: 0;
            white-space: normal;  /* Permet le retour à la ligne sur mobile si nécessaire */
        }
    }

    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }


 /* Styles de base pour la sidebar mobile */
 .mobile-sidebar {
    position: fixed;
    top: 0;
    left: -100%;
    width: 280px;
    height: 100vh;
    background: rgba(0, 0, 0, 0.95);
    backdrop-filter: blur(10px);
    z-index: 2000;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    padding: 20px;
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
    overflow-y: auto;
}

.mobile-sidebar.active {
    left: 0;
}

/* Overlay pour la sidebar */
.sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(3px);
    z-index: 1999;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}


/* Icône du panier */
.cart-container .fa-cart-shopping {
    font-size: 1.2rem; /* Taille de l'icône */
    color: #FF6F00; /* Couleur de l'icône */
    display: flex; /* Utilisation de flexbox pour centrer */
    align-items: center; /* Centre verticalement */
    justify-content: center; /* Centre horizontalement */
    margin-left:5px;
}


/* Styles pour le thème dark */
[data-theme="dark"] .cart-container {
    background-color: rgba(255, 111, 0, 0.1); /* Fond légèrement orange */
}

[data-theme="dark"] .cart-container .fa-cart-shopping {
    color: #FF6F00; /* Icône orange */
}

[data-theme="dark"] .cart-container .cart-count {
    background-color: red; /* Compteur orange */
    color: #fff; /* Texte blanc */
}

/* Styles pour le thème light */
[data-theme="light"] .cart-container {
    background-color: rgba(211, 84, 0, 0.1); /* Fond légèrement orange foncé */
}

[data-theme="light"] .cart-container .fa-cart-shopping {
    color: #D35400; /* Icône orange foncé */
}

[data-theme="light"] .cart-container .cart-count {
    background-color: red; /* Compteur orange foncé */
    color: #fff; /* Texte blanc */
}
.sidebar-overlay.active {
    opacity: 1;
    visibility: visible;
}

/* Style des éléments de la sidebar */
.sidebar-header {
    display: flex;
    align-items: center;
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(255, 111, 0, 0.2);
    margin-bottom: 20px;
}

.sidebar-logo {
    width: 40px; /* Largeur du logo */
    height: 40px; /* Hauteur du logo */
    margin-right: 15px; /* Espacement entre le logo et le texte */
    border-radius:5px; /* Pas de bord arrondi */
    background-color: #FF6F00; /* Couleur de fond du logo */
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem; /* Taille de l'icône ou du texte à l'intérieur du logo */
    color: white; /* Couleur du texte ou de l'icône */
    font-weight: bold; /* Texte en gras */
    text-transform: uppercase; /* Texte en majuscules */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Ombre légère pour un effet moderne */
}

.sidebar-brand {
    color: #FF6F00; /* Couleur du texte de la marque */
    font-size: 1.2rem; /* Taille du texte */
    font-weight: 600; /* Texte en gras */
    text-transform: uppercase; /* Texte en majuscules */
    letter-spacing: 1px; /* Espacement entre les lettres */
}
.sidebar-nav {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.sidebar-link {
    display: flex;
    align-items: center;
    padding: 12px 15px;
    color: #fff;
    text-decoration: none;
    border-radius: 10px;
    transition: all 0.3s ease;
    position: relative; /* Pour positionner le compteur */
}

.sidebar-link i {
    margin-right: 15px;
    font-size: 1.2rem;
    width: 24px;
    text-align: center;
}

.sidebar-link:hover {
    background: rgba(255, 111, 0, 0.1);
    color: #FF6F00;
    transform: translateX(5px);
}

/* Styles pour le thème light */
[data-theme="light"] .mobile-sidebar {
    background: rgba(255, 255, 255, 0.95);
}

[data-theme="light"] .sidebar-brand {
    color: #D35400; /* Orange foncé */
}

[data-theme="light"] .sidebar-link {
    color: #333;
}

[data-theme="light"] .sidebar-link:hover {
    background: rgba(255, 111, 0, 0.1);
    color: #D35400;
}

/* Styles pour le thème dark */
[data-theme="dark"] .mobile-sidebar {
    background: rgba(0, 0, 0, 0.95);
}

[data-theme="dark"] .sidebar-brand {
    color: #FF6F00;
}

[data-theme="dark"] .sidebar-link {
    color: #fff;
}

[data-theme="dark"] .sidebar-link:hover {
    background: rgba(255, 111, 0, 0.1);
    color: #FF6F00;
}




[data-theme="light"] .theme-toggle-mobile i {
    color: #D35400;
}



/* Conteneur principal pour les icônes */
.icons-container {
    display: flex;
    background: rgba(255, 111, 0, 0.1);
    border-radius: 50px;
    padding: 8px 15px;
    margin: 10px 0;
    justify-content: space-around;
    align-items: center;
    gap: 15px;
    position: relative;
    z-index: 2;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

/* Style des liens icônes */
.icon-link {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    transition: all 0.3s ease;
}

/* Style des icônes */
.icon-link i {
    font-size: 1.2rem;
    color: #FF6F00;
}

/* Style des compteurs */
.icon-count {
    position: absolute;
    top: -5px;
    right: -5px;
    background-color: red;
    color: white;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.6rem;
    font-weight: bold;
}

/* Effet hover */
.icon-link:hover {
    background: rgba(255, 111, 0, 0.2);
    transform: translateY(-2px);
}

.icon-link:hover i {
    color: #FF6F00;
}

/* Styles pour le thème dark */
[data-theme="dark"] .icons-container {
    background: rgba(255, 111, 0, 0.15);
}

[data-theme="dark"] .icon-link i {
    color: #FF6F00;
}

[data-theme="dark"] .icon-link:hover {
    background: rgba(255, 111, 0, 0.3);
}

/* Styles pour le thème light */
[data-theme="light"] .icons-container {
    background: rgba(211, 84, 0, 0.1);
}

[data-theme="light"] .icon-link i {
    color: #D35400;
}

[data-theme="light"] .icon-link:hover {
    background: rgba(211, 84, 0, 0.2);
}

[data-theme="light"] .icon-link:hover i {
    color: #D35400;
}
/* Conteneur du panier */
.cart-container {
    position: relative; /* Permet de positionner le compteur en absolu */
    display: flex; /* Utilisation de flexbox pour centrer */
    align-items: center; /* Centre verticalement les éléments */
    justify-content: center; /* Centre horizontalement les éléments */
    background-color: rgba(255, 111, 0, 0.1); /* Couleur de fond du conteneur */
    padding: 10px; /* Espacement interne */
    border-radius: 50%; /* Forme ronde */
    width: 40px; /* Largeur fixe */
    height: 40px; /* Hauteur fixe */
    transition: background-color 0.3s ease; /* Transition fluide */
}

/* Icône du panier */
.cart-container .fa-cart-shopping {
    font-size: 1.2rem; /* Taille de l'icône */
    color: #FF6F00; /* Couleur de l'icône */
    display: flex; /* Utilisation de flexbox pour centrer */
    align-items: center; /* Centre verticalement */
    justify-content: center; /* Centre horizontalement */
}

/* Compteur de panier */
.cart-container .cart-count {
    position: absolute; /* Position absolue par rapport au conteneur */
    top: 0; /* Aligné en haut */
    right: 0; /* Aligné à droite */
    transform: translate(50%, -50%); /* Décalage pour toucher le bord */
    background-color: #FF6F00; /* Couleur de fond du compteur */
    color: #fff; /* Couleur du texte */
    font-size: 0.8rem; /* Taille du texte */
    padding: 4px 8px; /* Espacement interne */
    border-radius: 50%; /* Forme ronde */
    min-width: 20px; /* Largeur minimale */
    height: 20px; /* Hauteur fixe */
    display: flex; /* Utilisation de flexbox pour centrer */
    align-items: center; /* Centre verticalement */
    justify-content: center; /* Centre horizontalement */
    text-align: center; /* Centrage du texte */
}

/* Styles pour le thème dark */
[data-theme="dark"] .cart-container {
    background-color: rgba(255, 111, 0, 0.1); /* Fond légèrement orange */
}

[data-theme="dark"] .cart-container .fa-cart-shopping {
    color: #FF6F00; /* Icône orange */
}

[data-theme="dark"] .cart-container .cart-count {
    background-color: #FF6F00; /* Compteur orange */
    color: #fff; /* Texte blanc */
}

/* Styles pour le thème light */
[data-theme="light"] .cart-container {
    background-color: rgba(211, 84, 0, 0.1); /* Fond légèrement orange foncé */
}

[data-theme="light"] .cart-container .fa-cart-shopping {
    color: #D35400; /* Icône orange foncé */
}

[data-theme="light"] .cart-container .cart-count {
    background-color: #D35400; /* Compteur orange foncé */
    color: #fff; /* Texte blanc */
}

/* Compteur du panier */
.cart-count {
    position: absolute;
    background: #FF6F00;
    color: #fff;
    font-size: 0.8rem;
    padding: 2px 6px;
    border-radius: 50%;
}

/* ---------------------------------Espacement vertical--------------------------------------------- */
                
:root {
    --background-color: #ffffff;
    --text-color: #333333;
    --input-background: #f5f5f5;
    --input-border: #e0e0e0;
    --primary-color: #007bff;
    --primary-hover: #0056b3;
    --modal-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    --modal-border-radius: 12px;
}

[data-theme="dark"] {
    --background-color: #1e1e1e;
    --text-color: #f5f5f5;
    --input-background: #2d2d2d;
    --input-border: #444444;
    --primary-color: #1a73e8;
    --primary-hover: #1557b0;
    --modal-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

/* Style spécifique pour la modal produit panier */
.modal-produit-panier {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-produit-panier-content {
    background-color: var(--background-color);
    padding: 20px;
    border-radius: var(--modal-border-radius);
    width: 90%;
    max-width: 1200px;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    margin: auto;
    box-shadow: var(--modal-shadow);
    color: var(--text-color);
}

.modal-produit-panier-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.modal-produit-panier-title {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--text-color);
}

.modal-produit-panier-close-btn {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--text-color);
    transition: color 0.3s ease;
}

.modal-produit-panier-close-btn:hover {
    color: var(--primary-color);
}

.modal-produit-panier-body {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.modal-produit-panier-search-filters {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
}

.modal-produit-panier-search-input {
    flex: 2;
}

.modal-produit-panier-price-input {
    flex: 1;
}

.modal-produit-panier-search-input input,
.modal-produit-panier-price-input input {
    width: 100%;
    padding: 12px;
    background-color: var(--input-background);
    border: 2px solid var(--input-border);
    border-radius: 8px;
    font-size: 1rem;
    outline: none;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
    color: var(--text-color);
}

.modal-produit-panier-search-input input:focus,
.modal-produit-panier-price-input input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 8px rgba(0, 123, 255, 0.3);
}

.modal-produit-panier-search-input input::placeholder,
.modal-produit-panier-price-input input::placeholder {
    color: #999;
}

.modal-produit-panier-apply-btn {
    background-color: var(--primary-color);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s ease, transform 0.2s ease;
}

.modal-produit-panier-apply-btn:hover {
    background-color: var(--primary-hover);
    transform: scale(1.05);
}

.modal-produit-panier-product-section {
    margin-top: 20px;
}

.modal-produit-panier-product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
}

/* Responsive pour grands écrans */
@media (min-width: 1200px) {
    .modal-produit-panier-content {
        max-width: 1400px;
        padding: 30px;
    }

    .modal-produit-panier-title {
        font-size: 2rem;
    }

    .modal-produit-panier-search-input input,
    .modal-produit-panier-price-input input {
        padding: 14px;
        font-size: 1.1rem;
    }

    .modal-produit-panier-apply-btn {
        padding: 14px 28px;
        font-size: 1.1rem;
    }
}

/* Responsive pour petits écrans */
@media (max-width: 768px) {
    .modal-produit-panier-content {
        width: 100%;
        height: 100%;
        border-radius: 0;
        padding: 10px;
        max-width: none;
    }

    .modal-produit-panier-title {
        font-size: 1.2rem;
    }

    .modal-produit-panier-search-filters {
        flex-direction: row;
        gap: 5px;
        flex-wrap: wrap;
    }

    .modal-produit-panier-search-input {
        flex: 2;
        min-width: 50%;
    }

    .modal-produit-panier-price-input {
        flex: 1;
        min-width: 20%;
    }

    .modal-produit-panier-search-input input,
    .modal-produit-panier-price-input input {
        padding: 8px;
        font-size: 0.9rem;
    }

    .modal-produit-panier-apply-btn {
        padding: 8px 15px;
        font-size: 0.9rem;
        flex: 1;
        min-width: 100%;
    }
}

/* Responsive pour très petits écrans */
@media (max-width: 480px) {
    .modal-produit-panier-content {
        padding: 5px;
    }

    .modal-produit-panier-title {
        font-size: 1rem;
    }

    .modal-produit-panier-search-filters {
        flex-direction: column;
        gap: 8px;
    }

    .modal-produit-panier-search-input,
    .modal-produit-panier-price-input,
    .modal-produit-panier-apply-btn {
        width: 100%;
        min-width: auto;
    }

    .modal-produit-panier-search-input input,
    .modal-produit-panier-price-input input {
        padding: 6px;
        font-size: 0.8rem;
    }

    .modal-produit-panier-apply-btn {
        padding: 6px 10px;
        font-size: 0.8rem;
    }
}
/* Footer Styling amélioré----------------------------------- */
/* Styles de base pour le footer */
.footer {
    background: linear-gradient(to top, #111, #000);
    color: #fff;
    padding: 50px 20px;
    font-family: 'Arial', sans-serif;
    box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
}

/* Mode clair pour le footer */
[data-theme="light"] .footer {
    background: linear-gradient(to top, #FFB6C1, #ADD8E6); /* Dégradé rose clair vers bleu pastel */
    color: #000000; /* Texte en noir */
}

[data-theme="light"] .footer-section h4 {
    color: #FF4500; /* Orange foncé pour les titres */
    border-bottom: 2px solid #FF6F00; /* Bordure orange */
}

[data-theme="light"] .footer-section ul li a {
    color: #FF6F00; /* Liens en orange */
}

[data-theme="light"] .footer-section ul li a:hover {
    color: #000000; /* Texte en noir au survol */
}

[data-theme="light"] .social-links a {
    color: #FF6F00; /* Icônes en orange */
}

[data-theme="light"] .social-links a:hover {
    color: #000000; /* Icônes en noir au survol */
}

[data-theme="light"] .newsletter-form input[type="email"] {
    border: 2px solid #FF6F00; /* Bordure orange */
    color: #000000; /* Texte en noir */
}

[data-theme="light"] .newsletter-form button {
    background-color: #FF6F00; /* Bouton orange */
    color: #ffffff; /* Texte en blanc */
}

[data-theme="light"] .newsletter-form button:hover {
    background-color: #FF4500; /* Orange plus foncé au survol */
}

[data-theme="light"] .footer-bottom {
    color: #000000; /* Texte en noir */
    border-top: 1px solid rgba(0, 0, 0, 0.2); /* Bordure légère */
}

/* Mode sombre pour le footer */
[data-theme="dark"] .footer {
    background: linear-gradient(to top, #1a1a1a, #2a2a2a); /* Dégradé gris foncé */
    color: #ffffff; /* Texte en blanc */
}

[data-theme="dark"] .footer-section h4 {
    color: #00FFFF; /* Cyan pour les titres */
    border-bottom: 2px solid #00FFFF; /* Bordure cyan */
}

[data-theme="dark"] .footer-section p, 
[data-theme="dark"] .footer-section ul {
    color: #e0e0e0; /* Texte en gris clair */
}

[data-theme="dark"] .footer-section ul li a {
    color: #00FFFF; /* Liens en cyan */
}

[data-theme="dark"] .footer-section ul li a:hover {
    color: #ffffff; /* Texte en blanc au survol */
}

[data-theme="dark"] .social-links a {
    color: #00FFFF; /* Icônes en cyan */
}

[data-theme="dark"] .social-links a:hover {
    color: #ffffff; /* Icônes en blanc au survol */
}

[data-theme="dark"] .newsletter-form input[type="email"] {
    border: 2px solid #00FFFF; /* Bordure cyan */
    color: #ffffff; /* Texte en blanc */
    background-color: rgba(255, 255, 255, 0.1); /* Fond légèrement transparent */
}

[data-theme="dark"] .newsletter-form button {
    background-color: #00FFFF; /* Bouton cyan */
    color: #000000; /* Texte en noir */
}

[data-theme="dark"] .newsletter-form button:hover {
    background-color: #00CED1; /* Cyan plus foncé au survol */
}

[data-theme="dark"] .footer-bottom {
    color: #e0e0e0; /* Texte en gris clair */
    border-top: 1px solid rgba(255, 255, 255, 0.2); /* Bordure légère */
}

[data-theme="dark"] .footer-bottom a {
    color: #00FFFF; /* Liens en cyan */
}

[data-theme="dark"] .footer-bottom a:hover {
    color: #ffffff; /* Texte en blanc au survol */
}

/* Conteneur du footer */
.footer-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
    text-align: left;
}

/* Sections du footer */
.footer-section {
    flex: 1 1 300px;
    min-width: 250px;
}

.footer-section h4 {
    font-size: 1.3rem;
    margin-bottom: 15px;
    padding-bottom: 5px;
    display: inline-block;
}

.footer-section p, .footer-section ul {
    font-size: 1rem;
    margin: 0;
    line-height: 1.8;
}

.footer-section ul {
    list-style: none;
    padding: 0;
}

.footer-section ul li {
    margin-bottom: 12px;
}

.footer-section ul li a {
    text-decoration: none;
    transition: all 0.3s ease-in-out;
}

.footer-section ul li a:hover {
    transform: translateX(5px);
}

/* Liens sociaux */
.social-links {
    display: flex;
    align-items: center;
    gap: 15px;
}

.social-links a {
    font-size: 1.7rem;
    transition: transform 0.3s ease, color 0.3s ease;
}

.social-links a:hover {
    transform: scale(1.3);
}

/* Formulaire de newsletter */
.newsletter-form {
    display: flex;
    gap: 10px;
}

.newsletter-form input[type="email"] {
    flex-grow: 1;
    padding: 10px;
    border-radius: 5px;
    background-color: transparent;
    transition: all 0.3s ease;
}

.newsletter-form button {
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

/* Section du bas du footer */
.footer-bottom {
    text-align: center;
    margin-top: 30px;
    font-size: 0.9rem;
    padding-top: 15px;
}

.footer-bottom a {
    color: inherit;
    text-decoration: none;
    transition: color 0.3s ease;
}

.footer-bottom a:hover {
    color: #FF6F00; /* Orange au survol */
}

/* Responsive Design */
@media screen and (max-width: 1024px) {
    .footer-container {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .footer-section {
        max-width: 500px;
        margin-bottom: 20px;
    }

    .social-links {
        justify-content: center;
    }
}

@media screen and (max-width: 768px) {
    .footer-container {
        padding: 0 15px;
    }

    .footer-section h4 {
        font-size: 1.1rem;
    }

    .footer-section p, .footer-section ul {
        font-size: 0.9rem;
    }

    .footer-bottom {
        font-size: 0.8rem;
        padding-top: 10px;
    }

    .social-links a {
        font-size: 1.4rem;
    }
}
/* Conteneur pour l'icône du panier ----------------------------------*/
.cart-icon-container {
    position: fixed;
    bottom: 50px; /* Ajustement de la hauteur */
    right: 20px; /* Placer l'icône à droite */
    z-index: 9998;
    animation: bounce 3s ease-in-out infinite; /* Animation plus fluide */
    display: flex;
    justify-content: center;
    align-items: center;
    width: 50px; /* Largeur fixe pour le conteneur */
    height: 50px; /* Hauteur fixe pour le conteneur */
}

/* Icône de panier */
.cart-icon {
    font-size: 40px; /* Réduction de la taille */
    color: #FF8C00; /* Orange foncé */
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
}

/* Compteur du panier */
.cart-icon-container .cart-count {
    position: absolute;
    top: -5px;
    right: -5px;
    background-color:#ff3d00;
    color: white;
    border-radius: 50%;
    font-weight: bold;
    width:16px;
    height: 16px;
    font-size: 12px;
    font-weight: bold;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    border: 2px solid #fff; /* Bordure blanche pour un effet pro */
    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2); /* Ombre légère pour un effet moderne */
}

/* Animation de rebond adoucie */
@keyframes bounce {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-8px); /* Réduction du rebond */
    }
}

/* Styles responsive pour tablettes */
@media (max-width: 768px) {
    .cart-icon-container {
        bottom: 40px;
        right: 15px;
        width: 45px;
        height: 45px;
    }

    .cart-icon {
        font-size: 35px; /* Réduction de la taille sur tablette */
    }

    .cart-count {
        font-size: 9px;
        padding: 2px 5px;
    }
}

/* Styles responsive pour mobiles */
@media (max-width: 480px) {
    .cart-icon-container {
        bottom: 30px;
        right: 10px;
        width: 40px;
        height: 40px;
    }

    .cart-icon {
        font-size: 30px; /* Réduction supplémentaire sur mobile */
    }

    .cart-count {
        font-size: 8px;
        padding: 2px 5px;
    }
}
 
/*----------------------Whatsapp icon-----------------*/
 

@media (min-width: 1024px) { /* Ajuste la taille selon tes besoins */
    .cart-icon-container {
        display: none;
    }
}

:root {
    --primary-orange: #FF6B00;
    --dark-orange: #E55D00;
    --light-orange: #FF8C00;
    --pale-orange: #FFF4EB;
    --success-green: #28A745;
    --danger-red: #DC3545;
    --gray-600: #6C757D;
    --gray-300: #DEE2E6;
    
    /* Light theme (default) */
    --bg-color: #FFFFFF;
    --card-bg: #FFFFFF;
    --text-color: #333333;
    --border-color: #F0F0F0;
    --shadow-color: rgba(0, 0, 0, 0.05);
    --hover-bg: #F9F9F9;
    --header-border: var(--gray-300);
}

[data-theme="dark"] {
    --bg-color: #121212;
    --card-bg: #1E1E1E;
    --text-color: #F5F5F5;
    --border-color: #333333;
    --shadow-color: rgba(0, 0, 0, 0.3);
    --hover-bg: #2A2A2A;
    --header-border: #444444;
    --gray-300: #444444;
    --gray-600: #AAAAAA;
    --pale-orange: #33261A;
}

.liked-products-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    min-height: 100vh;
    transition: background-color 0.3s ease, color 0.3s ease;
}

.liked-products-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
    margin-bottom: 30px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--header-border);
}

.liked-products-header h2 {
    color: var(--primary-orange);
    font-size: clamp(1.5rem, 2vw, 2rem);
    font-weight: 700;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 10px;
}

.selection-actions {
    display: flex;
    align-items: center;
    gap: 15px;
    flex-wrap: wrap;
}

.select-all-container {
    display: flex;
    align-items: center;
    gap: 8px;
}

.select-all-checkbox {
    width: 20px;
    height: 20px;
    accent-color: var(--primary-orange);
    cursor: pointer;
    transition: transform 0.2s;
}

.select-all-checkbox:hover {
    transform: scale(1.05);
}

.action-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 18px;
    border-radius: 8px;
    border: none;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.9rem;
}

.delete-selected-btn {
    background-color: var(--pale-orange);
    color: var(--danger-red);
    border: 1px solid rgba(255, 107, 0, 0.2);
}

.delete-selected-btn:hover {
    background-color: rgba(220, 53, 69, 0.1);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(220, 53, 69, 0.1);
}

.add-all-to-cart-btn {
    background-color: var(--primary-orange);
    color: white;
    box-shadow: 0 2px 10px rgba(255, 107, 0, 0.3);
}

.add-all-to-cart-btn:hover {
    background-color: var(--dark-orange);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(255, 107, 0, 0.4);
}

.products-count {
    color: var(--gray-600);
    font-size: 0.875rem;
    margin-left: 10px;
}

.liked-products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(min(100%, 380px), 1fr));
    gap: 25px;
}

.liked-product-card {
    display: flex;
    background: var(--card-bg);
    border-radius: 16px;
    box-shadow: 0 4px 20px var(--shadow-color);
    padding: 20px;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    position: relative;
    overflow: hidden;
    border-left: 4px solid var(--pale-orange);
}

.liked-product-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 28px rgba(255, 107, 0, 0.15);
    background-color: var(--hover-bg);
}

.selection-checkbox {
    margin-right: 15px;
    display: flex;
    align-items: center;
}

.product-select {
    width: 20px;
    height: 20px;
    accent-color: var(--primary-orange);
    cursor: pointer;
    transition: transform 0.2s;
}

.product-select:hover {
    transform: scale(1.05);
}

.product-media {
    position: relative;
    width: 100px;
    height: 100px;
    margin-right: 15px;
    flex-shrink: 0;
    background-color: transparent; /* Ajoutez cette ligne */
}

.product-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 8px;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}
[data-theme="dark"] .product-image {
    filter: drop-shadow(0 2px 4px rgba(255, 255, 255, 0.1));
    background-color: transparent;
}

.image-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 8px;
    background: linear-gradient(135deg, rgba(255,107,0,0.05) 0%, rgba(255,140,0,0.1) 100%);
}
[data-theme="dark"] .image-overlay {
    background: linear-gradient(135deg, rgba(255,107,0,0.02) 0%, rgba(255,140,0,0.05) 100%);
}
.product-badge {
    position: absolute;
    top: 8px;
    right: 8px;
    background-color: var(--danger-red);
    color: white;
    font-size: 0.7rem;
    font-weight: bold;
    padding: 4px 8px;
    border-radius: 20px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.product-details {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.product-category {
    color: var(--gray-600);
    font-size: 0.75rem;
    margin-bottom: 6px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.product-title {
    margin: 0 0 10px 0;
    font-size: 1rem;
    line-height: 1.5;
}

.product-title a {
    color: var(--text-color);
    font-weight: 600;
    text-decoration: none;
    transition: color 0.2s;
}

.product-title a:hover {
    color: var(--primary-orange);
}

.product-rating {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 10px;
}

.stars {
    --percent: calc(var(--rating) / 5 * 100%);
    display: inline-block;
    font-size: 0.9rem;
    line-height: 1;
}

.stars::before {
    content: '★★★★★';
    letter-spacing: 2px;
    background: linear-gradient(90deg, #FFC107 var(--percent), var(--gray-300) var(--percent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.reviews {
    color: var(--gray-600);
    font-size: 0.75rem;
}

.product-pricing {
    margin: 10px 0;
    display: flex;
    align-items: center;
}

.current-price {
    color: var(--primary-orange);
    font-weight: 700;
    font-size: 1.1rem;
}

.old-price {
    color: var(--gray-600);
    text-decoration: line-through;
    font-size: 0.8rem;
    margin-left: 8px;
}

.product-info {
    display: flex;
    gap: 12px;
    font-size: 0.75rem;
    margin-top: 10px;
    flex-wrap: wrap;
}

.stock-info {
    display: flex;
    align-items: center;
    gap: 4px;
}

.in-stock {
    color: var(--success-green);
}

.out-of-stock {
    color: var(--danger-red);
}

.delivery-info {
    color: var(--gray-600);
    display: flex;
    align-items: center;
    gap: 4px;
}

.product-actions {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-left: 10px;
}

.product-actions .action-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--card-bg);
    border: 1px solid var(--border-color);
    color: var(--gray-600);
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.product-actions .action-btn:hover {
    transform: scale(1.1);
}

.quick-view-btn:hover {
    color: var(--primary-orange);
    border-color: rgba(255, 107, 0, 0.3);
    background-color: rgba(255, 107, 0, 0.1);
}

.cart-btn:hover {
    color: white;
    background-color: var(--primary-orange);
    border-color: var(--primary-orange);
    box-shadow: 0 4px 12px rgba(255, 107, 0, 0.3);
}

.delete-btn:hover {
    color: white;
    background-color: var(--danger-red);
    border-color: var(--danger-red);
    box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
}

.empty-likes {
    grid-column: 1 / -1;
    text-align: center;
    padding: 60px 20px;
    background-color: var(--card-bg);
    border-radius: 16px;
    box-shadow: 0 4px 20px var(--shadow-color);
    margin: 20px 0;
}

.empty-content {
    max-width: 450px;
    margin: 0 auto;
}

.empty-likes i {
    font-size: 3.5rem;
    color: var(--primary-orange);
    margin-bottom: 25px;
    opacity: 0.7;
}

.empty-likes h3 {
    color: var(--text-color);
    font-size: 1.5rem;
    margin-bottom: 15px;
    font-weight: 600;
}

.empty-likes p {
    color: var(--gray-600);
    margin-bottom: 25px;
    line-height: 1.6;
}

.btn-primary {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    background-color: var(--primary-orange);
    color: white;
    border: none;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(255, 107, 0, 0.3);
}

.btn-primary:hover {
    background-color: var(--dark-orange);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(255, 107, 0, 0.4);
}


/* Responsive adjustments */
@media (max-width: 1024px) {
    .liked-products-grid {
        gap: 20px;
    }
    
    .liked-product-card {
        padding: 18px;
    }
}

@media (max-width: 768px) {
    .liked-products-header {
        flex-direction: column;
        align-items: stretch;
    }
    
    .selection-actions {
        flex-direction: column;
        align-items: stretch;
        gap: 12px;
    }
    
    .action-btn {
        justify-content: center;
        width: 100%;
    }
    
    .liked-product-card {
        flex-direction: row;
    }
    
    .product-media {
        width: 100px;
        height: 100px;
        margin-right: 15px;
        margin-bottom: 0;
    }
    
    .product-actions {
        flex-direction: row;
        margin-left: 0;
        margin-top: 15px;
        justify-content: flex-end;
    }
}

@media (max-width: 480px) {
    .liked-products-container {
        padding: 15px;
    }
    
    .liked-product-card {
        flex-direction: column;
    }
    
    .product-media {
        width: 100%;
        height: 180px;
        margin-right: 0;
        margin-bottom: 15px;
    }
    
    .product-actions {
        justify-content: center;
    }
    
    .empty-likes {
        padding: 40px 15px;
    }
}

/* Animation for empty state */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.empty-likes {
    animation: fadeIn 0.5s ease-out;
}


/* Variables communes */
:root {
    --like-color-light: #FF6347;
    --like-color-dark: #00FFFF;
    --count-bg:#ff3d00;
    --count-text: white;
}

/* Style de base */
.nav-link.likes {
    position: relative;
    display: flex;
    align-items: center;
    transition: all 0.3s ease;
    width:50px;
    height:50px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    border-radius: 50%;
    background:#FF6347;
    text-align:center;
    padding: 10px; /* Espacement interne */
}
.nav-link.likes i {
 margin-left:5px;
 
}
.nav-link.likes .count {
    position: absolute;
    top: -4px;
    right: -4px;
    background: var(--count-bg);
    color: var(--count-text);
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 0.8rem; /* Taille du texte */
    padding: 4px 8px; /* Espacement interne */
}

/* Effets hover */

.nav-link.likes  i {
    color:white;
}
[data-theme="light"] .navbar .nav-link.likes:hover:hover {
    background-color: #FF4500; /* Orange plus foncé au survol */
}
/* Thème sombre */
[data-theme="dark"] .nav-link.likes i {
    color: #001F3F;
}
[data-theme="dark"] .nav-link.likes {
    color: #001F3F;
    background:#00FFFF;
}

[data-theme="dark"] .nav-link.likes .count {
    background: var(--count-bg);
    color: white;
    border-color: #001F3F;
}
 


/* Animation du spinner */
@keyframes dotPulse {
    0%, 60%, 100% { 
        transform: scale(0.6); 
        opacity: 0.5; 
    }
    30% { 
        transform: scale(1); 
        opacity: 1; 
    }
}

.loading-spinner {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    height: 60px;
}

.spinner-dot {
    width: 12px;
    height: 12px;
    background-color: var(--primary-orange);
    border-radius: 50%;
    animation: dotPulse 1.4s infinite ease-in-out;
}

.spinner-dot:nth-child(1) { animation-delay: 0s; }
.spinner-dot:nth-child(2) { animation-delay: 0.2s; }
.spinner-dot:nth-child(3) { animation-delay: 0.4s; }
.spinner-dot:nth-child(4) { animation-delay: 0.6s; }

/* Fullscreen loading */
.fullscreen-loading {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(var(--bg-color), 0.9);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    backdrop-filter: blur(3px);
}

/* Modal */
.custom-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    background-color: var(--card-bg);
    padding: 25px;
    border-radius: 10px;
    max-width: 400px;
    width: 90%;
    box-shadow: 0 5px 15px var(--shadow-color);
    text-align: center;
    color: var(--text-color);
    border: 1px solid var(--border-color);
}

.modal-buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 20px;
    flex-wrap: wrap;
}

.confirm-btn {
    padding: 10px 20px;
    background-color: var(--primary-orange);
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.confirm-btn:hover {
    background-color: var(--dark-orange);
    transform: translateY(-1px);
}

.cancel-btn {
    padding: 10px 20px;
    background-color: var(--gray-300);
    color: var(--text-color);
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.cancel-btn:hover {
    background-color: var(--border-color);
    transform: translateY(-1px);
}

/* Toast notifications */
.toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 12px 24px;
    background-color: var(--primary-orange);
    color: white;
    border-radius: 5px;
    box-shadow: 0 3px 10px var(--shadow-color);
    z-index: 1000;
    animation: slideIn 0.3s ease-out;
    max-width: 300px;
    word-wrap: break-word;
}

.toast.success {
    background-color: var(--success-green);
}

.toast.error {
    background-color: var(--danger-red);
}

.toast.info {
    background-color: var(--gray-600);
}

.fade-out {
    animation: fadeOut 0.3s ease-in forwards;
}

@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

/* Messages d'erreur */
.error-message {
    color: var(--danger-red);
    text-align: center;
    padding: 20px;
    background-color: rgba(220, 53, 69, 0.1);
    border-radius: 8px;
    margin: 10px 0;
}

/* Contenu modal */
.modal-content p {
    color: var(--text-color);
    font-size: 16px;
    margin-bottom: 20px;
    line-height: 1.5;
}

/* Responsive */
@media (max-width: 768px) {
    .modal-content {
        padding: 20px 15px;
    }
    
    .modal-buttons {
        flex-direction: column;
        gap: 10px;
    }
    
    .confirm-btn, .cancel-btn {
        width: 100%;
    }
    
    .toast {
        max-width: 90%;
        right: 5%;
        bottom: 10px;
    }
}

@media (max-width: 480px) {
    .loading-spinner {
        height: 50px;
    }
    
    .spinner-dot {
        width: 10px;
        height: 10px;
    }
    
    .modal-content {
        width: 95%;
    }
    
    .fullscreen-loading {
        backdrop-filter: blur(2px);
    }
}
/* Icône "Déjà dans le panier" */
.in-cart-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    color: var(--success-green);
    font-size: 1.2rem;
    cursor: default;
    margin-left: 10px; /* Ajustez selon votre layout */
    opacity: 0;
    transform: scale(0.8);
    animation: bounceIn 0.4s ease-out forwards;
}

.in-cart-icon i {
    /* Style spécifique pour l'icône */
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
}

/* Animation d'apparition */
@keyframes bounceIn {
    0% { opacity: 0; transform: scale(0.8); }
    50% { opacity: 1; transform: scale(1.1); }
    100% { opacity: 1; transform: scale(1); }
}

/* Version pour le thème sombre */
[data-theme="dark"] .in-cart-icon {
    color: var(--light-orange);
}

[data-theme="dark"] .in-cart-icon i {
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.3));
}

/* Responsive */
@media (max-width: 768px) {
    .in-cart-icon {
        width: 36px;
        height: 36px;
        font-size: 1.1rem;
    }
}





/* Caché par défaut sur desktop */
.mobile-cart-fab {
    display: none;
    position: fixed;
    bottom: 24px;
    right: 24px;
    z-index: 1000;
}

.cart-fab {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15), 0 4px 8px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.cart-fab:active {
    transform: scale(0.92);
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

.cart-icon {
    width: 24px;
    height: 24px;
    color: white;
}

/* Nouveau style pour le badge mobile - Orange vif contrasté */
.cart-counter-mobil {
    position: absolute;
    top: -6px;
    right: -6px;
    background: red; /* Orange vif Material Design */
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
    border: 2px solid white;
    font-family: 'Roboto', sans-serif;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

/* Animation micro-interaction */
@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

.cart-fab:hover .cart-icon {
    animation: bounce 0.6s ease;
}

/* Affichage seulement sur mobile */
@media (max-width: 768px) {
    .mobile-cart-fab {
        display: block;
    }
}

/* Animation du badge */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.pulse-badge {
    animation: pulse 0.5s ease-in-out;
}
</style>
</head>

<body>
    <nav class="navbar">
        <!-- Logo et nom de la plateforme -->
        <a class="navbar-brand">
            <img src="{% if logo %}{{ logo }}{% else %}{% static 'logo2.png' %}{% endif %}" alt="Logo de la boutique" class="nav-logo">
            <span class="brand-name">{% if shop_name %}{{ shop_name }}{% else %}Nom de la boutique{% endif %}</span>
        </a>
    
        <!-- Barre de recherche centrale -->
        <div class="search-wrapper">
            <div class="search-box">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="search-input" placeholder="Rechercher un produit..." class="search-input" onfocus="openModalProduitPanier()">
            </div>
        </div>
    
        <!-- Menu principal -->
        <div class="nav-menu">
            <a href="{{home_boutique}}" class="nav-link">
                <i class="fas fa-home"></i>
                <span>Accueil</span>
            </a>
            <a href="{% url 'panier' utilisateur_identifiant=utilisateur_identifiant %}" class="nav-link panier">
                <i class="fa-solid fa-cart-shopping"></i> <!-- Icône du panier -->
                <div id="cart-count-nav" class="cart-count">0</div> <!-- Compteur de panier -->
            </a>
            <a href="#" class="nav-link likes">
                <i class="fa-solid fa-heart"></i>
                <div id="likes-count-nav" class="count">0</div>
            </a>        
            <a href="https://api.whatsapp.com/send/?phone=224{{utilisateur_numero}}" class="nav-link contact-link">
                <i class="fab fa-whatsapp"></i>
                <span>Contact</span>
            </a>
        </div>
    
        <!-- Menu hamburger pour mobile -->
        <button class="hamburger-btn" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
        </button>
    </nav>
  
   <!-- Ajouter l'ID utilisateur dans un attribut 'data' -->
   <div id="user-data" data-user-id="{{user_id}}"></div>

 <!-- Icône de basculement de mode -->
<div id="theme-toggle" class="theme-toggle">
    <i id="theme-icon" class="fas fa-moon"></i> <!-- Icône de lune par défaut -->
</div>

<!-- Icône de panier moderne responsive -->
<div class="mobile-cart-fab">
    <a href="{% url 'panier' utilisateur_identifiant=utilisateur_identifiant %}" aria-label="Panier" class="cart-fab">
        <span class="cart-counter-mobil">0</span>
        <svg class="cart-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path fill="currentColor" d="M17 18a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.11.89-2 2-2M1 2h3.27l.94 2H20a1 1 0 0 1 1 1c0 .17-.05.34-.12.5l-3.58 6.47c-.34.61-1 1.03-1.75 1.03H8.1l-.9 1.63-.03.12a.25.25 0 0 0 .25.25H19v2H7a2 2 0 0 1-2-2c0-.35.09-.68.24-.96l1.36-2.45L3.31 5H1M7 18a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.11.89-2 2-2m9-7l2.78-5H6.14l2.36 5Z"/>
        </svg>
    </a>
</div>

 <!-----------------------------Section des sliders des produits--------------------------->
  <!-- Ajouter l'ID utilisateur dans un attribut 'data' -->
<div id="user-data" data-user-id="{{ user_id }}"></div>

<div class="liked-products-container" style="margin-top:200px;">
    <!-- Entête avec options de gestion -->
    <div class="liked-products-header">
        <h2><i class="fas fa-heart" style="color: #FF4500;"></i> Mes Produits Favoris</h2>
        
        <div class="selection-actions">
            <div class="select-all-container">
                <input type="checkbox" id="select-all" class="select-all-checkbox">
                <label for="select-all">Tout sélectionner</label>
            </div>
            
            <button class="action-btn delete-selected-btn">
                <i class="fas fa-trash-alt"></i> Supprimer la sélection
            </button>
            
            <button class="action-btn add-all-to-cart-btn">
                <i class="fas fa-shopping-cart"></i> Tout ajouter au panier
            </button>
            
            <span class="products-count">{{ produits|length }} produit(s)</span>
        </div>
    </div>

    <div class="likes-container">   <!-- Liste des produits -->
    
    </div>
</div>




<!-- Badge compteur (à placer dans votre header/navbar) -->
<span class="cart-counter badge bg-danger" style="display: none;">0</span>



 
<!-- Modal de recherche produits -->
<div id="modal-produit-panier" class="modal-produit-panier">
    <div class="modal-produit-panier-content">
        <div class="modal-produit-panier-header">
            <h5 class="modal-produit-panier-title">Filtrer et rechercher des produits</h5>
            <button type="button" class="modal-produit-panier-close-btn" aria-label="Fermer">&times;</button>
        </div>
        <div class="modal-produit-panier-body">
            <!-- Barre de recherche et filtres -->
            <div class="modal-produit-panier-search-filters">
                <div class="modal-produit-panier-search-input">
                    <input id="modal-produit-panier-search-input" type="search" placeholder="🔍 Rechercher un produit..." aria-label="Search">
                </div>
                <div class="modal-produit-panier-price-input">
                    <input type="number" id="modal-produit-panier-min-price" placeholder="💰 Prix min">
                </div>
                <div class="modal-produit-panier-price-input">
                    <input type="number" id="modal-produit-panier-max-price" placeholder="💰 Prix max">
                </div>
                <button class="modal-produit-panier-apply-btn">
                    <span>Appliquer</span>
                </button>
            </div>
            <div id="modal-produit-panier-product-container" class="modal-produit-panier-product-section">
                <div class="modal-produit-panier-product-grid" id="modal-produit-panier-product-container">
                    <!-- Les produits filtrés ou recherchés apparaîtront ici -->
                </div>
            </div>
        </div>
    </div>
</div>
 <!-----------------------------Section du footer--------------------------->
 <footer class="footer">
    <div class="footer-container">
        <!-- Section Contact -->
        <div class="footer-section">
            <h4>Contactez-nous</h4>
            {% if utilisateur_email %}
                <p>Email : {{ utilisateur_email }}</p>
            {% else %}
                <p>Email : Non disponible</p>
            {% endif %}
            
            {% if utilisateur_numero %}
                <p>Téléphone : {{ utilisateur_numero }}</p>
            {% else %}
                <p>Téléphone : Non disponible</p>
            {% endif %}
            
            {% if localisation %}
                <p>Adresse : {{ localisation.repere }}, {{ localisation.ville }}, Guinée</p>
            {% else %}
                <p>Adresse : Non disponible</p>
            {% endif %}
        </div>

        <!-- Section Réseaux sociaux -->
        <div class="footer-section">
            <h4>Suivez-nous</h4>
            <div class="social-links">
                  <a href="https://www.facebook.com/profile.php?id=61572862923573&mibextid=ZbWKwL"><i class="fab fa-facebook"></i></a>
                <a href="https://x.com/warabaguinee?t=OYWsxA-GIp7q-o_RqBBxfg&s=09"><i class="fab fa-twitter"></i></a>
                <a href="https://www.instagram.com/waraba_guinee?igsh=YW41eHdycW9vOXFh"><i class="fab fa-instagram"></i></a>
                <a href="https://www.linkedin.com/in/waraba-guinee-b97a7634a"><i class="fab fa-linkedin"></i></a>
                <a href="https://www.youtube.com/channel/UCzD7sydRdbR9e6jTgtZG7GQ"><i class="fab fa-youtube"></i></a>
                <a href="https://www.tiktok.com/@warabaguinee"><i class="fab fa-tiktok"></i></a>
            </div>
        </div>
        
        <!-- Section Paiement sécurisé -->
        <div class="footer-section">
            <h4>Paiement sécurisé</h4>
            <p>Nous offrons des options de paiement sécurisé via Orange Money.</p>
        </div>
    </div>
    
    <!-- Footer bottom section -->
    <div class="footer-bottom">
        <p>&copy; 2025 Boutique Moderne. Tous droits réservés.</p>
        <p><a href="#privacy-policy">Politique de confidentialité</a> | <a href="#terms-of-service">Conditions d'utilisation</a></p>
    </div>
</footer>
<!-- Ajout de Font Awesome si besoin -->
<script src="https://kit.fontawesome.com/YOUR_KIT_CODE.js" crossorigin="anonymous"></script>

<!-- Ajout de jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Ajout de Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="{% static 'homeJs/navigateurControle.js' %}"></script>
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="{% static 'homeJs/navigateurControle.js' %}"></script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

<!-- ---------------------------// API gestion des categories produits  ---------------------------------->
<script>
    document.addEventListener('DOMContentLoaded', function() {
    // Configuration centrale améliorée
    const CONFIG = {
        RETRY_DELAY: 3000,
        MAX_RETRIES: 3,
        API_ENDPOINTS: {
            GET_LIKES: '/obtenir_produits_likes/',
            REMOVE_LIKE: '/retirer-des-likes/',
            ADD_TO_CART: '/ajouter_produit_au_panier/',
            GET_CART_COUNT: '/obtenir_panier/',
            GET_LIKE_COUNT: '/obtenir_like/',
            CSRF_TOKEN: '/get-csrf-token/',
            BULK_REMOVE_LIKES: '/retirer-likes-en-masse/'
        },
        ERROR_MESSAGES: {
            NETWORK: 'Problème de connexion. Réessai...',
            SERVER: 'Erreur serveur. Veuillez réessayer.',
            CSRF: 'Erreur de sécurité. Rafraîchissez la page.',
            EMPTY: 'Aucun favori trouvé.',
            SELECTION: 'Veuillez sélectionner au moins un produit.',
            CONFIRM_DELETE: 'Voulez-vous vraiment supprimer ce produit de vos favoris ?',
            CONFIRM_MULTI_DELETE: 'Voulez-vous vraiment supprimer les produits sélectionnés ?',
            CONFIRM_ADD_CART: 'Voulez-vous ajouter les produits sélectionnés à votre panier ?',
            SUCCESS_REMOVE: 'Produit(s) supprimé(s) avec succès',
            PARTIAL_REMOVE: 'Certains produits n\'ont pas pu être supprimés'
        },
        BULK_OPERATION: {
            BATCH_SIZE: 5, // Nombre de requêtes parallèles
            DELAY_BETWEEN_BATCHES: 500 // Délai entre les lots en ms
        }
    };

    // Fonction getCookie optimisée pour la production
    function getCookie(name) {
        const cookieString = document.cookie || '';
        const cookies = cookieString.split(';').map(c => c.trim());
        const cookie = cookies.find(c => c.startsWith(name + '='));
        return cookie ? decodeURIComponent(cookie.substring(name.length + 1)) : null;
    }

    // Gestion robuste du token CSRF
    async function getCSRFToken() {
        try {
            // Essayer d'abord depuis les cookies
            const csrfCookie = getCookie('csrftoken');
            if (csrfCookie) return csrfCookie;
            
            // Fallback: requête spéciale
            const response = await fetch(CONFIG.API_ENDPOINTS.CSRF_TOKEN, {
                method: 'GET',
                credentials: 'include',
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            });
            
            if (response.ok) {
                const data = await response.json();
                return data.csrfToken;
            }
        } catch (e) {
            console.error('Erreur récupération CSRF:', e);
        }
        return null;
    }

    // Fonction fetch sécurisée avec gestion intelligente des erreurs
    async function secureFetch(url, options = {}, retryCount = 0) {
        try {
            const csrfToken = await getCSRFToken();
            const isModifyingRequest = ['POST', 'PUT', 'DELETE', 'PATCH'].includes(
                (options.method || 'GET').toUpperCase()
            );

            const headers = {
                'Content-Type': 'application/json',
                'Accept': 'application/json',
                'X-Requested-With': 'XMLHttpRequest',
                ...options.headers
            };

            if (csrfToken && isModifyingRequest) {
                headers['X-CSRFToken'] = csrfToken;
            } else if (isModifyingRequest && !csrfToken) {
                throw new Error(CONFIG.ERROR_MESSAGES.CSRF);
            }

            const response = await fetch(url, {
                ...options,
                headers,
                credentials: 'include'
            });

            if (!response.ok) {
                const error = new Error('Erreur serveur');
                error.status = response.status;
                throw error;
            }
            return await response.json();
        } catch (error) {
            if (retryCount < CONFIG.MAX_RETRIES && !error.message.includes('CSRF')) {
                await new Promise(resolve => setTimeout(resolve, CONFIG.RETRY_DELAY));
                return secureFetch(url, options, retryCount + 1);
            }
            throw error;
        }
    }

    // Fonction principale de chargement avec gestion d'état
    async function loadLikedProducts(retryCount = 0) {
        const container = document.querySelector('.likes-container');
        if (!container) {
            console.error('Conteneur .likes-container introuvable');
            return;
        }

        showLoadingSpinner(container);

        try {
            const data = await secureFetch(CONFIG.API_ENDPOINTS.GET_LIKES);
            
            if (data.status === 'success' && data.likes_html) {
                container.innerHTML = data.likes_html;
                initEventListeners();
                updateCounters();
            } else {
                throw new Error('Données invalides');
            }
        } catch (error) {
            handleLoadError(error, container, retryCount);
        }
    }

    // Gestion avancée des erreurs
    function handleLoadError(error, container, retryCount) {
        console.error('Erreur:', error);
        const errorMessage = error.message.includes('CSRF') 
            ? CONFIG.ERROR_MESSAGES.CSRF 
            : error.status === 404 
                ? CONFIG.ERROR_MESSAGES.EMPTY
                : CONFIG.ERROR_MESSAGES.SERVER;

        if (retryCount < CONFIG.MAX_RETRIES && !error.message.includes('CSRF')) {
            container.innerHTML = `<p class="error">${errorMessage}</p>`;
            setTimeout(() => loadLikedProducts(retryCount + 1), CONFIG.RETRY_DELAY);
        } else {
            container.innerHTML = `<p class="error">${errorMessage}</p>`;
        }
    }

    // Spinner de chargement
    function showLoadingSpinner(container) {
        container.innerHTML = `
            <div class="loading-spinner">
                <div class="spinner-dot"></div>
                <div class="spinner-dot"></div>
                <div class="spinner-dot"></div>
                <div class="spinner-dot"></div>
            </div>
        `;
    }

    // Mise à jour des compteurs
    function updateCounters() {
        Promise.all([
            updateCounter(CONFIG.API_ENDPOINTS.GET_LIKE_COUNT, 'total_likes', ['#likes-count-nav', '#sidebar-like-count']),
            updateCounter(CONFIG.API_ENDPOINTS.GET_CART_COUNT, 'total_articles', [
                '#cart-count-nav', 
                '#car-count-sidebar', 
                '.cart-counter-mobil'
            ])
        ]).catch(error => {
            console.error('Erreur mise à jour compteurs:', error);
        });
    }

    // Fonction générique de compteur
    function updateCounter(url, dataKey, selectors) {
        return new Promise((resolve, reject) => {
            secureFetch(url)
                .then(data => {
                    const count = data[dataKey] || 0;
                    updateElementsText(selectors, count);
                    resolve();
                })
                .catch(error => {
                    updateElementsText(selectors, '0');
                    reject(error);
                });
        });
    }

    // Mise à jour des éléments DOM
    function updateElementsText(selectors, text) {
        selectors.forEach(selector => {
            const elements = selector.startsWith('.') 
                ? document.querySelectorAll(selector) 
                : [document.querySelector(selector)];
            
            elements.forEach(el => el && (el.textContent = text));
        });
    }

    // Suppression individuelle améliorée avec animation
    async function removeProduct(productId, productCard) {
        const loadingOverlay = createFullscreenLoader();
        const originalContent = productCard.innerHTML;
        
        try {
            // Animation de pré-suppression
            productCard.style.transition = 'all 0.3s ease';
            productCard.style.opacity = '0.5';
            productCard.style.transform = 'scale(0.98)';
            
            const response = await secureFetch(`${CONFIG.API_ENDPOINTS.REMOVE_LIKE}${productId}/`, {
                method: 'POST',
                body: JSON.stringify({ product_id: productId })
            });

            // Animation de suppression réussie
            productCard.style.height = `${productCard.offsetHeight}px`;
            productCard.style.overflow = 'hidden';
            
            setTimeout(() => {
                productCard.style.height = '0';
                productCard.style.margin = '0';
                productCard.style.padding = '0';
                productCard.style.border = 'none';
                
                setTimeout(() => {
                    productCard.remove();
                    showToast(CONFIG.ERROR_MESSAGES.SUCCESS_REMOVE, 'success');
                    updateCounters();
                    
                    // Vérifier s'il reste des produits
                    const remainingProducts = document.querySelectorAll('.liked-product-card').length;
                    if (remainingProducts === 0) {
                        loadLikedProducts(); // Recharger pour afficher le message "Aucun favori"
                    }
                }, 300);
            }, 100);
        } catch (error) {
            console.error('Erreur suppression:', error);
            
            // Animation d'échec
            productCard.style.opacity = '1';
            productCard.style.transform = 'scale(1)';
            productCard.innerHTML = originalContent;
            
            showToast(
                error.message.includes('CSRF') 
                    ? CONFIG.ERROR_MESSAGES.CSRF 
                    : 'Erreur lors de la suppression',
                'error'
            );
        } finally {
            loadingOverlay.remove();
        }
    }

    // Nouvelle implémentation de suppression en masse avec boucle et gestion par lots
    async function bulkRemoveProducts(productIds) {
        if (!productIds || productIds.length === 0) {
            showToast(CONFIG.ERROR_MESSAGES.SELECTION, 'error');
            return { success: false };
        }

        const loadingOverlay = createFullscreenLoader();
        const selectedCards = productIds.map(id => 
            document.querySelector(`.liked-product-card[data-product-id="${id}"]`)
        ).filter(Boolean);

        // Pré-animation pour tous les éléments sélectionnés
        selectedCards.forEach(card => {
            card.style.transition = 'all 0.3s ease';
            card.style.opacity = '0.5';
            card.style.transform = 'scale(0.98)';
        });

        try {
            // Diviser les IDs en lots pour éviter de surcharger le serveur
            const batches = [];
            for (let i = 0; i < productIds.length; i += CONFIG.BULK_OPERATION.BATCH_SIZE) {
                batches.push(productIds.slice(i, i + CONFIG.BULK_OPERATION.BATCH_SIZE));
            }

            const results = {
                successIds: [],
                failedIds: []
            };

            // Traiter chaque lot avec un délai entre eux
            for (let i = 0; i < batches.length; i++) {
                const batch = batches[i];
                try {
                    const response = await secureFetch(CONFIG.API_ENDPOINTS.BULK_REMOVE_LIKES, {
                        method: 'POST',
                        body: JSON.stringify({ product_ids: batch })
                    });

                    if (response.success_ids) {
                        results.successIds.push(...response.success_ids);
                    }
                    if (response.failed_ids) {
                        results.failedIds.push(...response.failed_ids);
                    }

                    // Animer les cartes supprimées avec succès
                    batch.forEach(id => {
                        if (response.success_ids && response.success_ids.includes(id)) {
                            const card = document.querySelector(`.liked-product-card[data-product-id="${id}"]`);
                            if (card) {
                                card.style.height = `${card.offsetHeight}px`;
                                card.style.overflow = 'hidden';
                                
                                setTimeout(() => {
                                    card.style.height = '0';
                                    card.style.margin = '0';
                                    card.style.padding = '0';
                                    card.style.border = 'none';
                                    
                                    setTimeout(() => card.remove(), 300);
                                }, 100);
                            }
                        }
                    });

                    // Délai entre les lots sauf pour le dernier
                    if (i < batches.length - 1) {
                        await new Promise(resolve => setTimeout(resolve, CONFIG.BULK_OPERATION.DELAY_BETWEEN_BATCHES));
                    }
                } catch (error) {
                    console.error(`Erreur lors du traitement du lot ${i}:`, error);
                    results.failedIds.push(...batch);
                }
            }

            // Gestion des cartes en échec
            results.failedIds.forEach(id => {
                const card = document.querySelector(`.liked-product-card[data-product-id="${id}"]`);
                if (card) {
                    card.style.opacity = '1';
                    card.style.transform = 'scale(1)';
                    card.querySelector('.product-select').checked = true;
                }
            });

            // Feedback utilisateur
            if (results.failedIds.length > 0) {
                showToast(
                    `${CONFIG.ERROR_MESSAGES.PARTIAL_REMOVE} (${results.failedIds.length}/${productIds.length})`,
                    'warning'
                );
            } else {
                showToast(
                    `${CONFIG.ERROR_MESSAGES.SUCCESS_REMOVE} (${productIds.length} produits)`,
                    'success'
                );
            }

            // Mise à jour des compteurs et rechargement si nécessaire
            if (results.successIds.length > 0) {
                updateCounters();
                
                // Vérifier s'il reste des produits
                const remainingProducts = document.querySelectorAll('.liked-product-card').length;
                if (remainingProducts === 0) {
                    loadLikedProducts(); // Recharger pour afficher le message "Aucun favori"
                }
            }

            return {
                success: true,
                successCount: results.successIds.length,
                failedCount: results.failedIds.length
            };
        } catch (error) {
            console.error('Erreur globale suppression en masse:', error);
            
            // Restaurer tous les éléments en cas d'erreur globale
            selectedCards.forEach(card => {
                card.style.opacity = '1';
                card.style.transform = 'scale(1)';
            });

            showToast(
                error.message.includes('CSRF') 
                    ? CONFIG.ERROR_MESSAGES.CSRF 
                    : 'Erreur lors de la suppression en masse',
                'error'
            );
            
            return {
                success: false,
                error: error.message
            };
        } finally {
            loadingOverlay.remove();
        }
    }

    // Loader plein écran
    function createFullscreenLoader() {
        const overlay = document.createElement('div');
        overlay.className = 'fullscreen-loading';
        overlay.appendChild(createModernSpinner());
        document.body.appendChild(overlay);
        return overlay;
    }

    // Création du spinner moderne
    function createModernSpinner() {
        const spinner = document.createElement('div');
        spinner.className = 'loading-spinner';
        
        for (let i = 0; i < 4; i++) {
            const dot = document.createElement('div');
            dot.className = 'spinner-dot';
            spinner.appendChild(dot);
        }
        
        return spinner;
    }

    // Modal de confirmation amélioré
    function createConfirmationModal(message, confirmCallback, cancelCallback) {
        const modal = document.createElement('div');
        modal.className = 'custom-modal';
        
        const modalContent = document.createElement('div');
        modalContent.className = 'modal-content';
        modalContent.style.color = '#333';
        
        const messageEl = document.createElement('p');
        messageEl.textContent = message;
        messageEl.style.margin = '0 0 20px 0';
        messageEl.style.fontSize = '16px';
        
        const buttonsContainer = document.createElement('div');
        buttonsContainer.className = 'modal-buttons';
        
        const confirmBtn = document.createElement('button');
        confirmBtn.className = 'confirm-btn';
        confirmBtn.textContent = 'Confirmer';
        
        const cancelBtn = document.createElement('button');
        cancelBtn.className = 'cancel-btn';
        cancelBtn.textContent = 'Annuler';
        
        confirmBtn.addEventListener('click', () => {
            modal.classList.add('fade-out');
            setTimeout(() => {
                document.body.removeChild(modal);
                confirmCallback();
            }, 300);
        });
        
        cancelBtn.addEventListener('click', () => {
            modal.classList.add('fade-out');
            setTimeout(() => {
                document.body.removeChild(modal);
                if (cancelCallback) cancelCallback();
            }, 300);
        });
        
        buttonsContainer.appendChild(cancelBtn);
        buttonsContainer.appendChild(confirmBtn);
        modalContent.appendChild(messageEl);
        modalContent.appendChild(buttonsContainer);
        modal.appendChild(modalContent);
        document.body.appendChild(modal);
        
        // Animation d'entrée
        setTimeout(() => {
            modal.classList.add('fade-in');
        }, 10);
    }

    // Affichage des messages toast amélioré
    function showToast(message, type = 'info') {
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        toast.textContent = message;
        document.body.appendChild(toast);
        
        // Animation d'entrée
        setTimeout(() => {
            toast.classList.add('show');
        }, 10);
        
        setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(() => toast.remove(), 300);
        }, 3000);
    }

    // Initialisation des événements améliorée
    function initEventListeners() {
        // Sélection globale intelligente
        const selectAllCheckbox = document.getElementById('select-all');
        if (selectAllCheckbox) {
            selectAllCheckbox.addEventListener('change', function() {
                const allCheckboxes = document.querySelectorAll('.product-select');
                const visibleCheckboxes = Array.from(allCheckboxes).filter(
                    cb => cb.closest('.liked-product-card').style.display !== 'none'
                );
                
                visibleCheckboxes.forEach(checkbox => {
                    checkbox.checked = this.checked;
                    toggleProductSelection(checkbox);
                });
                
                // Mise à jour de l'état du bouton "Tout sélectionner"
                if (!this.checked) {
                    const anyChecked = Array.from(visibleCheckboxes).some(cb => cb.checked);
                    this.indeterminate = anyChecked;
                }
            });
        }

        // Gestion des clics avec délégation d'événements
        document.addEventListener('click', async function(e) {
            // Suppression individuelle renforcée
            if (e.target.closest('.delete-btn')) {
                const productCard = e.target.closest('.liked-product-card');
                const productId = productCard.dataset.productId;
                
                createConfirmationModal(CONFIG.ERROR_MESSAGES.CONFIRM_DELETE, () => {
                    removeProduct(productId, productCard);
                });
            }
            
            // Ajout au panier
            if (e.target.closest('.cart-btn')) {
                const btn = e.target.closest('.cart-btn');
                const productCard = btn.closest('.liked-product-card');
                const productId = productCard.dataset.productId;
                const originalContent = btn.innerHTML;
                
                try {
                    btn.disabled = true;
                    btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';

                    const data = await secureFetch(`${CONFIG.API_ENDPOINTS.ADD_TO_CART}${productId}/`, {
                        method: 'POST'
                    });

                    // Feedback visuel
                    btn.innerHTML = '<i class="fas fa-check"></i>';
                    btn.classList.add('success');
                    
                    // Mise à jour compteur
                    if (data.total_articles !== undefined) {
                        updateElementsText(
                            ['#cart-count-nav', '#car-count-sidebar', '.cart-counter-mobil'],
                            data.total_articles
                        );
                    }

                    setTimeout(() => {
                        loadLikedProducts();
                        btn.innerHTML = originalContent;
                        btn.classList.remove('success');
                        btn.disabled = false;
                    }, 1000);
                } catch (error) {
                    console.error('Erreur:', error);
                    btn.innerHTML = '<i class="fas fa-times"></i>';
                    setTimeout(() => {
                        btn.innerHTML = originalContent;
                        btn.disabled = false;
                    }, 1000);
                    showToast(error.message.includes('CSRF') 
                        ? CONFIG.ERROR_MESSAGES.CSRF 
                        : 'Erreur lors de l\'ajout au panier', 'error');
                }
            }
        });

        // Suppression multiple améliorée avec boucle
        document.querySelector('.delete-selected-btn')?.addEventListener('click', function() {
            const selectedCheckboxes = Array.from(document.querySelectorAll('.product-select:checked'));
            const productIds = selectedCheckboxes.map(checkbox => 
                checkbox.closest('.liked-product-card').dataset.productId
            );

            if (productIds.length === 0) {
                showToast(CONFIG.ERROR_MESSAGES.SELECTION, 'error');
                return;
            }

            createConfirmationModal(
                `${CONFIG.ERROR_MESSAGES.CONFIRM_MULTI_DELETE} (${productIds.length})`, 
                async () => {
                    const button = this;
                    button.disabled = true;
                    const loadingOverlay = createFullscreenLoader();
                    
                    try {
                        // Utilisation de la nouvelle fonction bulkRemoveProducts avec boucle
                        await bulkRemoveProducts(productIds);
                    } finally {
                        button.disabled = false;
                        loadingOverlay.remove();
                    }
                }
            );
        });

        // Ajout multiple au panier
        document.querySelector('.add-all-to-cart-btn')?.addEventListener('click', function() {
            const selectedCheckboxes = Array.from(document.querySelectorAll('.product-select:checked'));
            
            if (selectedCheckboxes.length === 0) {
                showToast(CONFIG.ERROR_MESSAGES.SELECTION, 'error');
                return;
            }

            createConfirmationModal(
                `${CONFIG.ERROR_MESSAGES.CONFIRM_ADD_CART} (${selectedCheckboxes.length})`, 
                () => handleMultiAddToCart(selectedCheckboxes, this)
            );
        });

        // Gestion des cases à cocher individuelles
        document.querySelectorAll('.product-select').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                toggleProductSelection(this);
                
                // Mise à jour de l'état "Tout sélectionner"
                if (selectAllCheckbox) {
                    const allCheckboxes = document.querySelectorAll('.product-select');
                    const checkedCount = Array.from(allCheckboxes).filter(cb => cb.checked).length;
                    
                    if (checkedCount === 0) {
                        selectAllCheckbox.checked = false;
                        selectAllCheckbox.indeterminate = false;
                    } else if (checkedCount === allCheckboxes.length) {
                        selectAllCheckbox.checked = true;
                        selectAllCheckbox.indeterminate = false;
                    } else {
                        selectAllCheckbox.checked = false;
                        selectAllCheckbox.indeterminate = true;
                    }
                }
            });
        });
    }

    // Gestion de l'ajout multiple au panier
    async function handleMultiAddToCart(selectedCheckboxes, button) {
        const loadingOverlay = createFullscreenLoader();
        button.disabled = true;
        let successCount = 0;
        
        try {
            // Utilisation d'une boucle for...of pour un traitement séquentiel
            for (const checkbox of selectedCheckboxes) {
                const productCard = checkbox.closest('.liked-product-card');
                const productId = productCard.dataset.productId;
                
                try {
                    const data = await secureFetch(`${CONFIG.API_ENDPOINTS.ADD_TO_CART}${productId}/`, {
                        method: 'POST'
                    });

                    successCount++;
                    
                    if (data.total_articles !== undefined) {
                        updateElementsText(
                            ['#cart-count-nav', '#car-count-sidebar', '.cart-counter-mobil'],
                            data.total_articles
                        );
                    }
                } catch (error) {
                    console.error(`Erreur ajout produit ${productId}:`, error);
                }
            }

            showToast(`${successCount} produit(s) ajouté(s) au panier`, 'success');
            loadLikedProducts();
        } finally {
            loadingOverlay.remove();
            button.disabled = false;
        }
    }

    // Toggle de sélection amélioré
    function toggleProductSelection(checkbox) {
        const productCard = checkbox.closest('.liked-product-card');
        if (checkbox.checked) {
            productCard.classList.add('selected');
            productCard.style.transform = 'scale(0.98)';
            productCard.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.1)';
        } else {
            productCard.classList.remove('selected');
            productCard.style.transform = '';
            productCard.style.boxShadow = '';
        }
    }

    // Initialisation sécurisée avec vérification d'état
    (async function init() {
        try {
            // Pré-chargement du token CSRF
            const csrfToken = await getCSRFToken();
            if (!csrfToken) {
                console.warn('Token CSRF non disponible');
                showToast(CONFIG.ERROR_MESSAGES.CSRF, 'error');
            }
            
            // Chargement initial avec gestion des erreurs
            await loadLikedProducts();
            
            // Vérification périodique de l'état
            setInterval(async () => {
                try {
                    await updateCounters();
                } catch (e) {
                    console.warn('Échec de la mise à jour des compteurs:', e);
                }
            }, 60000); // Toutes les minutes
        } catch (e) {
            console.error('Erreur initialisation:', e);
            const container = document.querySelector('.likes-container') || document.body;
            container.innerHTML = `
                <div class="error-container">
                    <p>${CONFIG.ERROR_MESSAGES.SERVER}</p>
                    <button class="retry-btn">Réessayer</button>
                </div>
            `;
            container.querySelector('.retry-btn').addEventListener('click', init);
        }
    })();
});
</script>
    
<script>
    (function() {
        function updateLikes() {
            $.ajax({
                url: "/obtenir_like/",
                method: "GET",
                dataType: "json",
                success: function(data) {
                    const likeCount = data.total_likes || 0;
                    $("#likes-count-nav").text(likeCount);
                    $("#sidebar-like-count").text(likeCount);
                },
                error: function() {
                    $("#likes-count-nav").text(0);
                    $("#sidebar-like-count").text(0);
                }
            });
        }
    
        function updateCartCount() {
            $.ajax({
                url: "/obtenir_panier/",
                method: "GET",
                dataType: "json",
                success: function(data) {
                    const cartCount = data.total_articles || 0;
                    $("#cart-count-nav").text(cartCount);
                    $("#car-count-sidebar").text(cartCount);
                    $(".cart-counter-mobil").text(cartCount);
                },
                error: function() {
                    $("#cart-count-nav").text(0);
                    $("#car-count-sidebar").text(0);
                    $(".cart-counter-mobil").text(0);
                }
            });
        }
    
        updateLikes();
        updateCartCount();
    })();
</script>

<script>
    $(document).ready(function() {
        // Configuration avec des valeurs par défaut
        const config = {
            retryDelay: 5000,    // 5 secondes avant réessai
            maxRetries: 3,       // Nombre maximum de tentatives
            containerSelector: '.likes-container',
            errorMessages: {
                connection: '<p class="error">Problème de connexion. Réessai...</p>',
                serverError: '<p class="error">Erreur serveur. Veuillez réessayer plus tard.</p>',
                emptyResponse: '<p>Aucun favori pour le moment.</p>'
            }
        };
    
        // Fonction pour charger les produits likés avec gestion des réessais
        function loadLikedProducts(retryCount = 0) {
            $.ajax({
                url: '/obtenir_produits_likes/',
                type: 'GET',
                dataType: 'json',
                timeout: 10000, // 10 secondes timeout
                beforeSend: function() {
                    // Afficher un indicateur de chargement si besoin
                    $(config.containerSelector).html('<div class="loading">Chargement...</div>');
                },
                success: function(response) {
                    if (response && response.status === 'success') {
                        if (response.likes_html && response.likes_html.trim() !== '') {
                            $(config.containerSelector).html(response.likes_html);
                        } else {
                            $(config.containerSelector).html(config.errorMessages.emptyResponse);
                        }
                    } else {
                        handleError(response, retryCount);
                    }
                },
                error: function(xhr, status, error) {
                    console.error('Erreur AJAX:', status, error);
                    handleError(null, retryCount);
                }
            });
        }
    
        // Gestion centralisée des erreurs
        function handleError(response, retryCount) {
            let errorMessage = config.errorMessages.serverError;
            
            if (!response) {
                errorMessage = config.errorMessages.connection;
            }
    
            if (retryCount < config.maxRetries) {
                // Afficher message temporaire avant réessai
                $(config.containerSelector).html(errorMessage);
                
                // Réessayer après délai
                setTimeout(() => {
                    loadLikedProducts(retryCount + 1);
                }, config.retryDelay);
            } else {
                // Afficher message d'erreur final
                $(config.containerSelector).html(config.errorMessages.serverError);
            }
        }
    
        // Initialisation
        try {
            loadLikedProducts();
        } catch (e) {
            console.error('Erreur initiale:', e);
            $(config.containerSelector).html(config.errorMessages.serverError);
        }
    
        // Rechargement optionnel avec vérification de la visibilité de la page

        let refreshInterval = setInterval(() => {
            if (!document.hidden) {
                loadLikedProducts();
            }
        }, 30000);
       
    });
    </script>
<!-- //------------------- Récupérer l'ID de l'utilisateur Gestion Modal-----------------------------------  -->
<script>
    // Fonction pour ouvrir le modal
   function openModalProduitPanier() {
       document.getElementById('modal-produit-panier').style.display = 'flex';
   }
   
   // Fermer le modal avec le bouton de fermeture
   document.querySelector('.modal-produit-panier-close-btn').addEventListener('click', function() {
       document.getElementById('modal-produit-panier').style.display = 'none';
   });
   
   // Fermer le modal en cliquant en dehors
   window.addEventListener('click', function(event) {
       if (event.target === document.getElementById('modal-produit-panier')) {
           document.getElementById('modal-produit-panier').style.display = 'none';
       }
   });
      
   </script>
   <script>
   const user_id = document.getElementById('user-data') ? document.getElementById('user-data').getAttribute('data-user-id') : null;
   
   if (!user_id) {
       console.error("Utilisateur ID est manquant");
   }
   
   $(document).ready(function () {
       // Fonction pour récupérer et afficher les produits
       function chargerProduits() {
           let nom_produit = $('#modal-produit-panier-search-input').val().trim();
           let prix_min = $('#modal-produit-panier-min-price').val();
           let prix_max = $('#modal-produit-panier-max-price').val();
   
           console.log("🔍 Recherche de produits avec :", { nom_produit, prix_min, prix_max });
   
           // Afficher un indicateur de chargement en réduisant l'opacité
           $('#modal-produit-panier-product-container').css('opacity', '0.5');
   
           $.ajax({
               url: '/produits/recherche/' + user_id + '/',
               type: 'GET',
               data: {
                   'nom': nom_produit,
                   'prix_min': prix_min,
                   'prix_max': prix_max
               },
               success: function (response) {
                   console.log("✅ Réponse AJAX reçue :", response);
   
                   if (response.produits_html) {
                       $('#modal-produit-panier-product-container').html(response.produits_html).css('opacity', '1');
   
                       // Vérifier si aucun produit n'a été retourné
                       if ($('#modal-produit-panier-product-container').html().trim() === '') {
                           $('#modal-produit-panier-product-container').html('<p>Aucun produit trouvé.</p>');
                       }
                   } else {
                       console.error("⚠️ Réponse inattendue du serveur :", response);
                       alert("Une erreur s'est produite.");
                   }
               },
               error: function (xhr, status, error) {
                   console.error("❌ Erreur AJAX :", {
                       status: xhr.status,
                       statusText: xhr.statusText,
                       responseText: xhr.responseText
                   });
                   alert("Une erreur s'est produite lors du chargement des produits.");
               }
           });
       }
   
       // Appliquer les filtres lorsqu'on clique sur le bouton "Appliquer"
       $('.modal-produit-panier-apply-btn').on('click', function () {
           chargerProduits();
       });
   
       // Optionnel: Ajouter la recherche lors de la touche Entrée
       $('#modal-produit-panier-search-input').on('keypress', function(e) {
           if (e.which === 13) {
               chargerProduits();
           }
       });
   });
   </script>
    <script>
        // Gestion du menu mobile
        function toggleMenu() {
            const navbar = document.querySelector('.navbar');
            const navLinks = document.querySelector('.nav-links');
            const hamburger = document.querySelector('.hamburger i');
            
            navLinks.classList.toggle('active');
            navbar.classList.toggle('mobile-active');
            
            // Animation de l'icône du menu
            if (navLinks.classList.contains('active')) {
                hamburger.classList.remove('fa-bars');
                hamburger.classList.add('fa-times');
            } else {
                hamburger.classList.add('fa-bars');
                hamburger.classList.remove('fa-times');
            }
        }

        // Gestion du scroll pour la navbar
        let lastScroll = 0;
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            const currentScroll = window.pageYOffset;
            
            if (currentScroll <= 0) {
                navbar.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.1)';
                return;
            }
            
            if (currentScroll > lastScroll && !navbar.classList.contains('mobile-active')) {
                // Scroll vers le bas
                navbar.style.transform = 'translateY(-100%)';
            } else {
                // Scroll vers le haut
                navbar.style.transform = 'translateY(0)';
                navbar.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.15)';
            }
            
            lastScroll = currentScroll;
        });

        // Fermer le menu mobile lors du clic sur un lien
        document.querySelectorAll('.nav-links .nav-item').forEach(link => {
            link.addEventListener('click', () => {
                const navLinks = document.querySelector('.nav-links');
                const hamburger = document.querySelector('.hamburger i');
                if (navLinks.classList.contains('active')) {
                    navLinks.classList.remove('active');
                    document.querySelector('.navbar').classList.remove('mobile-active');
                    hamburger.classList.add('fa-bars');
                    hamburger.classList.remove('fa-times');
                }
            });
        });

   
    </script>

    <script>
        // Gestion du menu hamburger
        function toggleMenu() {
            const navMenu = document.querySelector('.nav-menu');
            const hamburgerBtn = document.querySelector('.hamburger-btn');
            
            navMenu.classList.toggle('show');
            hamburgerBtn.classList.toggle('active');
            
            // Empêcher le défilement de la page quand le menu est ouvert
            document.body.style.overflow = navMenu.classList.contains('show') ? 'hidden' : '';
        }

        // Fermer le menu mobile lors du clic sur un lien
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                const navMenu = document.querySelector('.nav-menu');
                const hamburgerBtn = document.querySelector('.hamburger-btn');
                
                if (navMenu.classList.contains('show')) {
                    navMenu.classList.remove('show');
                    hamburgerBtn.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        });

        // Fermer le menu mobile lors du redimensionnement de la fenêtre
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                const navMenu = document.querySelector('.nav-menu');
                const hamburgerBtn = document.querySelector('.hamburger-btn');
                
                navMenu.classList.remove('show');
                hamburgerBtn.classList.remove('active');
                document.body.style.overflow = '';
            }
        });
    </script>



<!-- Sidebar mobile -->

<div class="sidebar-overlay"></div>
<div class="mobile-sidebar">
    <div class="sidebar-header">
        <img src="{% if logo %}{{ logo }}{% else %}{% static 'logo2.png' %}{% endif %}" alt="Logo de la boutique" class="sidebar-logo">
        <span class="sidebar-brand">{% if shop_name %}{{ shop_name }}{% else %}Nom de la boutique{% endif %}</span>
    </div>
    
    <nav class="sidebar-nav">
        <a href="{{home_boutique}}" class="sidebar-link">
            <i class="fas fa-home"></i>
            <span>Accueil</span>
        </a>
        <!-- Conteneur pour les icônes like et panier -->
        <div class="icons-container">
            <a href="{% url 'likes_site' utilisateur_identifiant=utilisateur_identifiant %}" class="icon-link like-container" style="text-decoration: none;">
                <i class="fa-solid fa-heart"></i>
                <div id="sidebar-like-count" class="icon-count">0</div>
            </a>
            <a href="{% url 'panier' utilisateur_identifiant=utilisateur_identifiant %}" class="icon-link cart-container"style="text-decoration: none;">
                <i class="fa-solid fa-cart-shopping"></i>
                <div id="car-count-sidebar" class="icon-count">0</div>
            </a>
        </div>
        
        <a href="https://api.whatsapp.com/send/?phone=224{{utilisateur_numero}}" class="sidebar-link">
            <i class="fab fa-whatsapp"></i>
            <span>Contact</span>
        </a>
    </nav>

    <!-- Icône de basculement de mode dans la sidebar -->
    <div id="theme-toggle-mobile" class="theme-toggle-mobile">
        <i id="theme-icon-mobile" class="fas fa-moon"></i>
    </div>
</div>
<script>
// Gestion de la sidebar mobile
document.addEventListener('DOMContentLoaded', function() {
    const hamburgerBtn = document.querySelector('.hamburger-btn');
    const sidebar = document.querySelector('.mobile-sidebar');
    const overlay = document.querySelector('.sidebar-overlay');
    const sidebarClose = document.querySelector('.sidebar-close');
    const sidebarLinks = document.querySelectorAll('.sidebar-link');

    function toggleSidebar() {
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
        document.body.style.overflow = sidebar.classList.contains('active') ? 'hidden' : '';
    }

    hamburgerBtn.addEventListener('click', toggleSidebar);
    overlay.addEventListener('click', toggleSidebar);
    sidebarClose.addEventListener('click', toggleSidebar);

    // Fermer la sidebar lors du clic sur un lien
    sidebarLinks.forEach(link => {
        link.addEventListener('click', () => {
            toggleSidebar();
        });
    });
});
</script>

<script>

//<!-------------------------------- Gestion de la mise à jour du panier-----------------------------------------> 
document.addEventListener('DOMContentLoaded', function() {
  fetch('/obtenir-panier/')
    .then(response => response.json())
    .then(data => {
      const cartCount = document.querySelector('#cart-count');
      const cartCountNav = document.querySelector('#cart-count-nav');
      const sidebarCount = document.querySelector('#sidebar-count');
      cartCount.textContent = data.total_articles;  // Mettez à jour le nombre d'articles dans le panier
      cartCountNav.textContent = data.total_articles;  // Mettez à jour le nombre d'articles dans le panier
      sidebarCount.textContent = data.total_articles;  // Mettez à jour le nombre d'articles dans le panier
    })
    .catch(error => {
      console.error('Erreur lors de la récupération du panier:', error);
    });

  // Ajout de l'écouteur d'événement sur le bouton de filtrage
  const applyFilterButton = document.getElementById('apply-filter-button');
  if (applyFilterButton) {
    applyFilterButton.addEventListener('click', performSearch);
  } else {
    console.error('Bouton "apply-filter-button" introuvable.');
  }
});


</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const html = document.documentElement; // On cible <html> et non <body>
        const themeToggle = document.getElementById('theme-toggle');
        const themeToggleMobile = document.getElementById('theme-toggle-mobile');
        const themeIcon = document.getElementById('theme-icon');
        const themeIconMobile = document.getElementById('theme-icon-mobile');
    
        // Vérifier le mode enregistré ou définir par défaut
        const savedTheme = localStorage.getItem('theme') || 'dark';
        html.setAttribute('data-theme', savedTheme);
        themeIcon.classList.toggle('fa-sun', savedTheme === 'light');
        themeIcon.classList.toggle('fa-moon', savedTheme === 'dark');
        if (themeIconMobile) {
            themeIconMobile.classList.toggle('fa-sun', savedTheme === 'light');
            themeIconMobile.classList.toggle('fa-moon', savedTheme === 'dark');
        }
    
        // Fonction pour basculer entre les thèmes
        function toggleTheme() {
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    
            html.setAttribute('data-theme', newTheme);
            themeIcon.classList.toggle('fa-sun', newTheme === 'light');
            themeIcon.classList.toggle('fa-moon', newTheme === 'dark');
            if (themeIconMobile) {
                themeIconMobile.classList.toggle('fa-sun', newTheme === 'light');
                themeIconMobile.classList.toggle('fa-moon', newTheme === 'dark');
            }
            localStorage.setItem('theme', newTheme);
        }
    
        // Ajouter l'événement de clic à l'icône originale
        if (themeToggle) {
            themeToggle.addEventListener('click', toggleTheme);
        }
    
        // Ajouter l'événement de clic à l'icône dans la sidebar mobile
        if (themeToggleMobile) {
            themeToggleMobile.addEventListener('click', toggleTheme);
        }
    });
</script>
<script>
   document.addEventListener("DOMContentLoaded", function () {
    // Sélectionner tous les liens dans la sidebar
    const sidebarLinks = document.querySelectorAll(".mobile-sidebar .sidebar-link");

    // Sélectionner la sidebar et l'overlay
    const mobileSidebar = document.querySelector(".mobile-sidebar");
    const sidebarOverlay = document.querySelector(".sidebar-overlay");

    // Fonction pour fermer la sidebar
    function closeSidebar() {
        mobileSidebar.classList.remove("active");
        sidebarOverlay.classList.remove("active");
        document.body.style.overflow = "auto"; // Réactiver le scroll sur le body
    }

    // Ajouter un écouteur d'événements à chaque lien
    sidebarLinks.forEach(link => {
        link.addEventListener("click", function (e) {
            // Empêcher le comportement par défaut si nécessaire
            e.preventDefault();

            // Fermer la sidebar
            closeSidebar();

            // Rediriger vers l'URL du lien après un court délai (optionnel)
            setTimeout(() => {
                window.location.href = link.href;
            }, 300); // 300ms de délai pour la fermeture de la sidebar
        });
    });

    // Fermer la sidebar en cliquant sur l'overlay (optionnel)
    sidebarOverlay.addEventListener("click", closeSidebar);
});
</script>
</body>
</html>
