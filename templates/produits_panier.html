<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <head>
        <head>
            <head>
                <title>WarabaGuinée</title>
                <link rel="icon" type="image/png" sizes="32x32" href="/static/lo.jpeg">
                <link rel="icon" type="image/png" sizes="48x48" href="/static/lo.jpeg">
                <link rel="icon" type="image/png" sizes="96x96" href="/sta nbhi j^$=ûiopà)^tic/lo.jpeg">
                <link rel="icon" type="image/png" sizes="192x192" href="/static/lo.jpeg">
                <link rel="icon" type="image/png" sizes="512x512" href="/static/lo.jpeg">
            </head>
            
        </head>
        
    </head>
    {% load static %}
   <!-- Meta Informations -->
<meta name="csrf-token" content="{{ csrf_token }}"> <!-- Ajoute le token CSRF -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Fonts (Material Icons) -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Bootstrap CSS (dernière version stable) -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css">

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<!-- Swiper CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

<!-- Bootstrap JS (dernière version stable) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>

<!-- FontAwesome Kit (remplacez YOUR_KIT_CODE par votre clé) -->
<script src="https://kit.fontawesome.com/YOUR_KIT_CODE.js" crossorigin="anonymous"></script>

    <style>
         /* Global navbar styles */
         *,
        *::before,
        *::after {
            box-sizing: border-box;
        }
        :root {
            --background-color: #ffffff; /* Couleur de fond par défaut (light) */
            --text-color: #000000; /* Couleur du texte par défaut (light) */
            --overlay-color: rgba(0, 0, 0, 0.5); /* Couleur de l'overlay par défaut (light) */
            --button-bg-color: #ff6347; /* Couleur de fond du bouton par défaut (light) */
            --button-hover-bg-color: #ff4500; /* Couleur de fond du bouton au survol (light) */
            --dot-color: #000000; /* Couleur des points par défaut (light) */
            --active-dot-color: #ff6347; /* Couleur du point actif par défaut (light) */
            --shadow-color: rgba(255, 102, 0, 0.5); /* Couleur de l'ombre par défaut (light) */
            --bullet-color: rgba(0, 0, 0, 0.6); /* Couleur des bullets par défaut (light) */
            --active-bullet-color: #ff6600; /* Couleur du bullet actif par défaut (light) */
            --icon-color: #FF8C00; /* Couleur des icônes par défaut (light) */
            --card-bg-color: #f9f9f9; /* Couleur de fond des cartes (light) */
        }
        
        [data-theme="dark"] {
            --background-color: #121212; /* Couleur de fond pour le thème dark */
            --text-color: #ffffff; /* Couleur du texte pour le thème dark */
            --overlay-color: rgba(255, 255, 255, 0.5); /* Couleur de l'overlay pour le thème dark */
            --button-bg-color: #ff6347; /* Couleur de fond du bouton pour le thème dark */
            --button-hover-bg-color: #ff4500; /* Couleur de fond du bouton au survol pour le thème dark */
            --dot-color: #ffffff; /* Couleur des points pour le thème dark */
            --active-dot-color: #ff6347; /* Couleur du point actif pour le thème dark */
            --shadow-color: rgba(255, 102, 0, 0.7); /* Couleur de l'ombre pour le thème dark */
            --bullet-color: rgba(255, 255, 255, 0.8); /* Couleur des bullets pour le thème dark */
            --active-bullet-color: #ff6600; /* Couleur du bullet actif pour le thème dark */
            --icon-color: #FF8C00; /* Couleur des icônes pour le thème dark */
            --card-bg-color: #1e1e1e; /* Couleur de fond des cartes (dark) */
        }
        body {
                    font-family: 'Roboto', sans-serif;
                    line-height: 1.6;
                    transition: background-color 0.3s, color 0.3s;
                    background-color: var(--background-color);
                    color: var(--text-primary);
                    transition: all 0.3s ease;
        }

            

        html {
            scroll-behavior: smooth;
        }

            /* Styles pour l'icône de basculement de mode */
        .theme-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background-color: #fff;
            color: #000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;
        }

        /* Cacher l'icône sur les petits écrans */
        @media (max-width: 768px) {
            .theme-toggle {
                display: none;
            }
        }

        /* Styles pour l'icône de basculement de mode dans la sidebar mobile */
        .theme-toggle-mobile {
            width: 40px;
            height: 40px;
            background-color: #fff;
            color: #000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            margin: 20px auto; /* Centrer l'icône dans la sidebar */
            transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;
        }

        /* Mode sombre */
        [data-theme="dark"] .theme-toggle {
            background-color: #000;
            color: #fff;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.2);
        }

        /* Animation de l'icône */
        .theme-toggle i {
            font-size: 24px;
            transition: transform 0.3s ease, color 0.3s ease;
        }

        /* Effet de rotation au changement de thème */
        .theme-toggle:active i {
            transform: rotate(180deg);
        }

        /* Changement de couleur pour une meilleure visibilité */
        [data-theme="dark"] .theme-toggle i {
            color: #ffcc00; /* Jaune pour mieux contraster */
        }

        [data-theme="light"] .theme-toggle i {
            color: #222; /* Gris foncé pour plus de lisibilité */
        }

/* Styles de la navbar ---------------------------*/
/* Styles de base de la navbar */
.navbar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 2rem;
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    z-index: 1000;
    transition: all 0.3s ease;
    flex-wrap: nowrap;
}

/* Styles pour le mode clair */
[data-theme="light"] .navbar {
    background: linear-gradient(90deg, #FFB6C1, #ADD8E6); /* Dégradé rose clair vers bleu pastel */
}

[data-theme="light"] .navbar a {
    color: #000000; /* Texte en noir */
}

[data-theme="light"] .navbar .brand-name {
    color: #FF4500; /* Nom du logo en orange foncé */
}

[data-theme="light"] .navbar .nav-link {
    color: #000000; /* Texte en noir */
}

[data-theme="light"] .navbar .nav-link:hover {
    background: rgba(255, 111, 0, 0.1); /* Fond orange clair au survol */
    color: #FF6F00; /* Texte orange au survol */
}

[data-theme="light"] .navbar .search-input {
    background: rgba(255, 255, 255, 0.9); /* Fond blanc pour la recherche */
    color: #000000; /* Texte en noir */
    border: 1px solid rgba(0, 0, 0, 0.2); /* Bordure légère */
}

[data-theme="light"] .navbar .search-input:focus {
    border-color: #FF6F00; /* Bordure orange au focus */
    box-shadow: 0 0 10px rgba(255, 111, 0, 0.2); /* Ombre orange au focus */
}

[data-theme="light"] .navbar .search-input::placeholder {
    color: rgba(0, 0, 0, 0.6); /* Placeholder en gris foncé */
}

[data-theme="light"] .navbar .nav-link.panier {
    background-color: #FF6F00; /* Fond orange pour le panier */
    color: #ffffff; /* Icône blanche */
}

[data-theme="light"] .navbar .nav-link.panier:hover {
    background-color: #FF4500; /* Orange plus foncé au survol */
}

/* Styles pour le mode sombre */
[data-theme="dark"] .navbar {
    background: linear-gradient(90deg, #000000, #00FFFF); /* Dégradé noir vers cyan */
}

[data-theme="dark"] .navbar a {
    color: #ffffff; /* Texte en blanc */
}

[data-theme="dark"] .navbar .brand-name {
    color: #00FFFF; /* Cyan pour le nom de la marque */
}

[data-theme="dark"] .navbar .nav-link {
    color: #ffffff; /* Texte en blanc */
}

[data-theme="dark"] .navbar .nav-link:hover {
    background: rgba(0, 255, 255, 0.1); /* Fond cyan clair au survol */
    color: #00FFFF; /* Texte cyan au survol */
}

[data-theme="dark"] .navbar .search-input {
    background: rgba(0, 0, 0, 0.8); /* Fond noir pour la recherche */
    color: #ffffff; /* Texte en blanc */
    border: 1px solid rgba(255, 255, 255, 0.2); /* Bordure légère */
}

[data-theme="dark"] .navbar .search-input:focus {
    background: rgba(0, 0, 0, 0.9); /* Fond noir plus intense au focus */
    border-color: #00FFFF; /* Bordure cyan au focus */
    box-shadow: 0 0 10px rgba(0, 255, 255, 0.2); /* Ombre cyan au focus */
}

[data-theme="dark"] .navbar .search-input::placeholder {
    color: rgba(255, 255, 255, 0.7); /* Placeholder en gris clair */
}

[data-theme="dark"] .navbar .nav-link.panier {
    background-color: #00FFFF; /* Fond cyan pour le panier */
    color: #000000; /* Icône noire */
}

[data-theme="dark"] .navbar .nav-link.panier:hover {
    background-color: #00CED1; /* Cyan plus foncé au survol */
}

/* Styles pour le logo et le nom de la marque */
.navbar-brand {
    display: flex;
    align-items: center;
    gap: 1.2rem;
    text-decoration: none;
}

.nav-logo {
    width: 60px;
    height: 60px;
    border-radius: 15px;
    object-fit: cover;
    transition: all 0.3s ease;
    border: 2px solid #FF6F00;
    box-shadow: 0 4px 20px rgba(255, 111, 0, 0.3);
    background: linear-gradient(45deg, rgba(255, 111, 0, 0.1), rgba(255, 255, 255, 0.1));
    padding: 4px;
}

.nav-logo:hover {
    transform: scale(1.1);
    border-color: #FF9800;
    box-shadow: 0 6px 25px rgba(255, 111, 0, 0.5);
}

.brand-name {
    color: #FF6F00;
    font-size: 1.8rem;
    font-weight: 600;
    letter-spacing: 0.5px;
    text-shadow: 0 0 10px rgba(255, 111, 0, 0.2);
}

/* Styles pour la barre de recherche */
.search-wrapper {
    max-width: 400px;
    margin: 0 2rem;
    flex-grow: 1;
}

.search-box {
    position: relative;
    width: 100%;
}

.search-input {
    width: 100%;
    padding: 12px 45px 12px 40px; /* Plus d'espace à gauche */
    border-radius: 25px;
    font-size: 16px;
    transition: all 0.3s ease;
}

.search-icon {
    position: absolute;
    left: 15px; /* Ajustement de la position */
    top: 50%;
    transform: translateY(-50%);
    color: #FF6F00;
    font-size: 1rem;
    cursor: pointer;
}

/* Styles pour les liens de navigation */
.nav-menu {
    display: flex;
    align-items: center;
    gap: 1.5rem;
}

.nav-link {
    position: relative;
    display: flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.8rem 1.2rem;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 500;
    transition: all 0.3s ease;
}

.nav-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 111, 0, 0.1);
}

.nav-link i {
    font-size: 20px;
    margin-right: 8px;
}

/* Styles spécifiques pour le panier */
.nav-link.panier {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    text-decoration: none;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.cart-count {
    position: absolute;
    top: 0;
    right: 0;
    background-color: #ff3d00;
    color: white;
    width: 18px;
    height: 18px;
    font-size: 12px;
    font-weight: bold;
    text-align: center;
    line-height: 18px;
    border-radius: 50%;
    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);
    transform: translate(30%, -35%);
}

/* Styles pour le bouton hamburger (mobile) */
.hamburger-btn {
    display: none;
    background: none;
    border: none;
    color: #FF6F00;
    font-size: 1.5rem;
    cursor: pointer;
    z-index: 2001;
    transition: all 0.3s ease;
}

/* Responsive Design */
@media (max-width: 768px) {
    .navbar {
        padding: 0.8rem;
        flex-wrap: wrap;
    }

    .nav-menu {
        display: none;
        width: 100%;
        flex-direction: column;
        padding: 1rem 0;
        background: rgba(0, 0, 0, 0.98);
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        transform-origin: top;
        opacity: 0;
        transform: translateY(-10px);
        transition: all 0.3s ease-in-out;
    }

    .nav-menu.show {
        display: flex;
        opacity: 1;
        transform: translateY(0);
    }

    .search-wrapper {
        order: 3;
        flex: 1 1 100%;
        margin: 0.8rem 0;
    }

    .hamburger-btn {
        display: block;
        order: 2;
    }

    .user-menu {
        order: 1;
    }

    .nav-link {
        width: 100%;
        padding: 0.8rem 2rem;
        border-radius: 0;
        white-space: normal;
    }
    .brand-name {
        color: #FF6F00;
        font-size:16px;
        font-weight: 600;
        text-shadow: 0 0 10px rgba(255, 111, 0, 0.2);
    }
}

/* Animation pour le menu déroulant */
@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.nav-menu.show {
    animation: slideDown 0.3s ease-in-out;
}

    /* Style pour le modal */
    .modal-content {
        background: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 111, 0, 0.2);
        border-radius: 25px;
        color: white;
    }

    @keyframes modalOpen {
        from {
            opacity: 0;
            transform: scale(0.8);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    /* Responsive design */
    @media (max-width: 1024px) {
        .navbar {
            padding: 1rem;
        }
        
        .search-wrapper {
            flex: 0 1 300px;
            margin: 0 1rem;
        }
    }

    @media (max-width: 768px) {
        .navbar {
            padding: 0.8rem;
            flex-wrap: wrap;
        }

        .nav-menu {
            display: none;
            width: 100%;
            flex-direction: column;
            padding: 1rem 0;
            background: rgba(0, 0, 0, 0.98);
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            transform-origin: top;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease-in-out;
        }

        .nav-menu.show {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        .search-wrapper {
            order: 3;
            flex: 1 1 100%;
            margin: 0.8rem 0;
        }

        .hamburger-btn {
            display: block;
            order: 2;
        }

        .user-menu {
            order: 1;
        }

        .nav-link {
            width: 100%;
            padding: 0.8rem 2rem;
            border-radius: 0;
            white-space: normal;  /* Permet le retour à la ligne sur mobile si nécessaire */
        }
    }

    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }



    /* Styles de base pour la sidebar mobile */
    .mobile-sidebar {
        position: fixed;
        top: 0;
        left: -100%;
        width: 280px;
        height: 100vh;
        background: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(10px);
        z-index: 2000;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        padding: 20px;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
        overflow-y: auto;
    }
    
    .mobile-sidebar.active {
        left: 0;
    }
    
    /* Overlay pour la sidebar */
    .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(3px);
        z-index: 1999;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
    }
    
    
    /* Icône du panier */
    .cart-container .fa-cart-shopping {
        font-size: 1.2rem; /* Taille de l'icône */
        color: #FF6F00; /* Couleur de l'icône */
        display: flex; /* Utilisation de flexbox pour centrer */
        align-items: center; /* Centre verticalement */
        justify-content: center; /* Centre horizontalement */
        margin-left:5px;
    }
    
    
    /* Styles pour le thème dark */
    [data-theme="dark"] .cart-container {
        background-color: rgba(255, 111, 0, 0.1); /* Fond légèrement orange */
    }
    
    [data-theme="dark"] .cart-container .fa-cart-shopping {
        color: #FF6F00; /* Icône orange */
    }
    
    [data-theme="dark"] .cart-container .cart-count {
        background-color: red; /* Compteur orange */
        color: #fff; /* Texte blanc */
    }
    
    /* Styles pour le thème light */
    [data-theme="light"] .cart-container {
        background-color: rgba(211, 84, 0, 0.1); /* Fond légèrement orange foncé */
    }
    
    [data-theme="light"] .cart-container .fa-cart-shopping {
        color: #D35400; /* Icône orange foncé */
    }
    
    [data-theme="light"] .cart-container .cart-count {
        background-color: red; /* Compteur orange foncé */
        color: #fff; /* Texte blanc */
    }
    .sidebar-overlay.active {
        opacity: 1;
        visibility: visible;
    }
    
    /* Style des éléments de la sidebar */
    .sidebar-header {
        display: flex;
        align-items: center;
        padding-bottom: 20px;
        border-bottom: 1px solid rgba(255, 111, 0, 0.2);
        margin-bottom: 20px;
    }
    
    .sidebar-logo {
        width: 40px; /* Largeur du logo */
        height: 40px; /* Hauteur du logo */
        margin-right: 15px; /* Espacement entre le logo et le texte */
        border-radius:5px; /* Pas de bord arrondi */
        background-color: #FF6F00; /* Couleur de fond du logo */
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem; /* Taille de l'icône ou du texte à l'intérieur du logo */
        color: white; /* Couleur du texte ou de l'icône */
        font-weight: bold; /* Texte en gras */
        text-transform: uppercase; /* Texte en majuscules */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Ombre légère pour un effet moderne */
    }
    
    .sidebar-brand {
        color: #FF6F00; /* Couleur du texte de la marque */
        font-size: 1.2rem; /* Taille du texte */
        font-weight: 600; /* Texte en gras */
        text-transform: uppercase; /* Texte en majuscules */
        letter-spacing: 1px; /* Espacement entre les lettres */
    }
    .sidebar-nav {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    
    .sidebar-link {
        display: flex;
        align-items: center;
        padding: 12px 15px;
        color: #fff;
        text-decoration: none;
        border-radius: 10px;
        transition: all 0.3s ease;
        position: relative; /* Pour positionner le compteur */
    }
    
    .sidebar-link i {
        margin-right: 15px;
        font-size: 1.2rem;
        width: 24px;
        text-align: center;
    }
    
    .sidebar-link:hover {
        background: rgba(255, 111, 0, 0.1);
        color: #FF6F00;
        transform: translateX(5px);
    }
    
    /* Styles pour le thème light */
    [data-theme="light"] .mobile-sidebar {
        background: rgba(255, 255, 255, 0.95);
    }
    
    [data-theme="light"] .sidebar-brand {
        color: #D35400; /* Orange foncé */
    }
    
    [data-theme="light"] .sidebar-link {
        color: #333;
    }
    
    [data-theme="light"] .sidebar-link:hover {
        background: rgba(255, 111, 0, 0.1);
        color: #D35400;
    }
    
    /* Styles pour le thème dark */
    [data-theme="dark"] .mobile-sidebar {
        background: rgba(0, 0, 0, 0.95);
    }
    
    [data-theme="dark"] .sidebar-brand {
        color: #FF6F00;
    }
    
    [data-theme="dark"] .sidebar-link {
        color: #fff;
    }
    
    [data-theme="dark"] .sidebar-link:hover {
        background: rgba(255, 111, 0, 0.1);
        color: #FF6F00;
    }
    
    
    
    
    [data-theme="light"] .theme-toggle-mobile i {
        color: #D35400;
    }
    
    
    
    /* Conteneur principal pour les icônes */
    .icons-container {
        display: flex;
        background: rgba(255, 111, 0, 0.1);
        border-radius: 50px;
        padding: 8px 15px;
        margin: 10px 0;
        justify-content: space-around;
        align-items: center;
        gap: 15px;
        position: relative;
        z-index: 2;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    /* Style des liens icônes */
    .icon-link {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        transition: all 0.3s ease;
    }
    
    /* Style des icônes */
    .icon-link i {
        font-size: 1.2rem;
        color: #FF6F00;
    }
    
    /* Style des compteurs */
    .icon-count {
        position: absolute;
        top: -5px;
        right: -5px;
        background-color: red;
        color: white;
        border-radius: 50%;
        width: 18px;
        height: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.6rem;
        font-weight: bold;
    }
    
    /* Effet hover */
    .icon-link:hover {
        background: rgba(255, 111, 0, 0.2);
        transform: translateY(-2px);
    }
    
    .icon-link:hover i {
        color: #FF6F00;
    }
    
    /* Styles pour le thème dark */
    [data-theme="dark"] .icons-container {
        background: rgba(255, 111, 0, 0.15);
    }
    
    [data-theme="dark"] .icon-link i {
        color: #FF6F00;
    }
    
    [data-theme="dark"] .icon-link:hover {
        background: rgba(255, 111, 0, 0.3);
    }
    
    /* Styles pour le thème light */
    [data-theme="light"] .icons-container {
        background: rgba(211, 84, 0, 0.1);
    }
    
    [data-theme="light"] .icon-link i {
        color: #D35400;
    }
    
    [data-theme="light"] .icon-link:hover {
        background: rgba(211, 84, 0, 0.2);
    }
    
    [data-theme="light"] .icon-link:hover i {
        color: #D35400;
    }
    /* Conteneur du panier */
    .cart-container {
        position: relative; /* Permet de positionner le compteur en absolu */
        display: flex; /* Utilisation de flexbox pour centrer */
        align-items: center; /* Centre verticalement les éléments */
        justify-content: center; /* Centre horizontalement les éléments */
        background-color: rgba(255, 111, 0, 0.1); /* Couleur de fond du conteneur */
        padding: 10px; /* Espacement interne */
        border-radius: 50%; /* Forme ronde */
        width: 40px; /* Largeur fixe */
        height: 40px; /* Hauteur fixe */
        transition: background-color 0.3s ease; /* Transition fluide */
    }
    
    /* Icône du panier */
    .cart-container .fa-cart-shopping {
        font-size: 1.2rem; /* Taille de l'icône */
        color: #FF6F00; /* Couleur de l'icône */
        display: flex; /* Utilisation de flexbox pour centrer */
        align-items: center; /* Centre verticalement */
        justify-content: center; /* Centre horizontalement */
    }
    
    /* Compteur de panier */
    .cart-container .cart-count {
        position: absolute; /* Position absolue par rapport au conteneur */
        top: 0; /* Aligné en haut */
        right: 0; /* Aligné à droite */
        transform: translate(50%, -50%); /* Décalage pour toucher le bord */
        background-color: #FF6F00; /* Couleur de fond du compteur */
        color: #fff; /* Couleur du texte */
        font-size: 0.8rem; /* Taille du texte */
        padding: 4px 8px; /* Espacement interne */
        border-radius: 50%; /* Forme ronde */
        min-width: 20px; /* Largeur minimale */
        height: 20px; /* Hauteur fixe */
        display: flex; /* Utilisation de flexbox pour centrer */
        align-items: center; /* Centre verticalement */
        justify-content: center; /* Centre horizontalement */
        text-align: center; /* Centrage du texte */
    }
    
    /* Styles pour le thème dark */
    [data-theme="dark"] .cart-container {
        background-color: rgba(255, 111, 0, 0.1); /* Fond légèrement orange */
    }
    
    [data-theme="dark"] .cart-container .fa-cart-shopping {
        color: #FF6F00; /* Icône orange */
    }
    
    [data-theme="dark"] .cart-container .cart-count {
        background-color: #FF6F00; /* Compteur orange */
        color: #fff; /* Texte blanc */
    }
    
    /* Styles pour le thème light */
    [data-theme="light"] .cart-container {
        background-color: rgba(211, 84, 0, 0.1); /* Fond légèrement orange foncé */
    }
    
    [data-theme="light"] .cart-container .fa-cart-shopping {
        color: #D35400; /* Icône orange foncé */
    }
    
    [data-theme="light"] .cart-container .cart-count {
        background-color: #D35400; /* Compteur orange foncé */
        color: #fff; /* Texte blanc */
    }
    
    /* Compteur du panier */
    .cart-count {
        position: absolute;
        background: #FF6F00;
        color: #fff;
        font-size: 0.8rem;
        padding: 2px 6px;
        border-radius: 50%;
    }
    
/* ---------------------------------Espacement vertical--------------------------------------------- */
 /* Variables CSS pour les thèmes */
:root {
    --background-color: #ffffff;
    --text-color: #333333;
    --input-background: #f5f5f5;
    --input-border: #e0e0e0;
    --primary-color: #007bff;
    --primary-hover: #0056b3;
    --modal-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    --modal-border-radius: 12px;
}

[data-theme="dark"] {
    --background-color: #1e1e1e;
    --text-color: #f5f5f5;
    --input-background: #2d2d2d;
    --input-border: #444444;
    --primary-color: #1a73e8;
    --primary-hover: #1557b0;
    --modal-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

/* Style spécifique pour la modal produit panier */
.modal-produit-panier {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-produit-panier-content {
    background-color: var(--background-color);
    padding: 20px;
    border-radius: var(--modal-border-radius);
    width: 90%;
    max-width: 1200px;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    margin: auto;
    box-shadow: var(--modal-shadow);
    color: var(--text-color);
}

.modal-produit-panier-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.modal-produit-panier-title {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--text-color);
}

.modal-produit-panier-close-btn {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--text-color);
    transition: color 0.3s ease;
}

.modal-produit-panier-close-btn:hover {
    color: var(--primary-color);
}

.modal-produit-panier-body {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.modal-produit-panier-search-filters {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
}

.modal-produit-panier-search-input {
    flex: 2;
}

.modal-produit-panier-price-input {
    flex: 1;
}

.modal-produit-panier-search-input input,
.modal-produit-panier-price-input input {
    width: 100%;
    padding: 12px;
    background-color: var(--input-background);
    border: 2px solid var(--input-border);
    border-radius: 8px;
    font-size: 1rem;
    outline: none;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
    color: var(--text-color);
}

.modal-produit-panier-search-input input:focus,
.modal-produit-panier-price-input input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 8px rgba(0, 123, 255, 0.3);
}

.modal-produit-panier-search-input input::placeholder,
.modal-produit-panier-price-input input::placeholder {
    color: #999;
}

.modal-produit-panier-apply-btn {
    background-color: var(--primary-color);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s ease, transform 0.2s ease;
}

.modal-produit-panier-apply-btn:hover {
    background-color: var(--primary-hover);
    transform: scale(1.05);
}

.modal-produit-panier-product-section {
    margin-top: 20px;
}

.modal-produit-panier-product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
}

/* Responsive pour grands écrans */
@media (min-width: 1200px) {
    .modal-produit-panier-content {
        max-width: 1400px;
        padding: 30px;
    }

    .modal-produit-panier-title {
        font-size: 2rem;
    }

    .modal-produit-panier-search-input input,
    .modal-produit-panier-price-input input {
        padding: 14px;
        font-size: 1.1rem;
    }

    .modal-produit-panier-apply-btn {
        padding: 14px 28px;
        font-size: 1.1rem;
    }
}

/* Responsive pour petits écrans */
@media (max-width: 768px) {
    .modal-produit-panier-content {
        width: 100%;
        height: 100%;
        border-radius: 0;
        padding: 10px;
        max-width: none;
    }

    .modal-produit-panier-title {
        font-size: 1.2rem;
    }

    .modal-produit-panier-search-filters {
        flex-direction: row;
        gap: 5px;
        flex-wrap: wrap;
    }

    .modal-produit-panier-search-input {
        flex: 2;
        min-width: 50%;
    }

    .modal-produit-panier-price-input {
        flex: 1;
        min-width: 20%;
    }

    .modal-produit-panier-search-input input,
    .modal-produit-panier-price-input input {
        padding: 8px;
        font-size: 0.9rem;
    }

    .modal-produit-panier-apply-btn {
        padding: 8px 15px;
        font-size: 0.9rem;
        flex: 1;
        min-width: 100%;
    }
}

/* Responsive pour très petits écrans */
@media (max-width: 480px) {
    .modal-produit-panier-content {
        padding: 5px;
    }

    .modal-produit-panier-title {
        font-size: 1rem;
    }

    .modal-produit-panier-search-filters {
        flex-direction: column;
        gap: 8px;
    }

    .modal-produit-panier-search-input,
    .modal-produit-panier-price-input,
    .modal-produit-panier-apply-btn {
        width: 100%;
        min-width: auto;
    }

    .modal-produit-panier-search-input input,
    .modal-produit-panier-price-input input {
        padding: 6px;
        font-size: 0.8rem;
    }

    .modal-produit-panier-apply-btn {
        padding: 6px 10px;
        font-size: 0.8rem;
    }
}
/* Footer Styling amélioré----------------------------------- */
/* Styles de base pour le footer */
.footer {
    background: linear-gradient(to top, #111, #000);
    color: #fff;
    padding: 50px 20px;
    font-family: 'Arial', sans-serif;
    box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
}

/* Mode clair pour le footer */
[data-theme="light"] .footer {
    background: linear-gradient(to top, #FFB6C1, #ADD8E6); /* Dégradé rose clair vers bleu pastel */
    color: #000000; /* Texte en noir */
}

[data-theme="light"] .footer-section h4 {
    color: #FF4500; /* Orange foncé pour les titres */
    border-bottom: 2px solid #FF6F00; /* Bordure orange */
}

[data-theme="light"] .footer-section ul li a {
    color: #FF6F00; /* Liens en orange */
}

[data-theme="light"] .footer-section ul li a:hover {
    color: #000000; /* Texte en noir au survol */
}

[data-theme="light"] .social-links a {
    color: #FF6F00; /* Icônes en orange */
}

[data-theme="light"] .social-links a:hover {
    color: #000000; /* Icônes en noir au survol */
}

[data-theme="light"] .newsletter-form input[type="email"] {
    border: 2px solid #FF6F00; /* Bordure orange */
    color: #000000; /* Texte en noir */
}

[data-theme="light"] .newsletter-form button {
    background-color: #FF6F00; /* Bouton orange */
    color: #ffffff; /* Texte en blanc */
}

[data-theme="light"] .newsletter-form button:hover {
    background-color: #FF4500; /* Orange plus foncé au survol */
}

[data-theme="light"] .footer-bottom {
    color: #000000; /* Texte en noir */
    border-top: 1px solid rgba(0, 0, 0, 0.2); /* Bordure légère */
}

/* Mode sombre pour le footer */
[data-theme="dark"] .footer {
    background: linear-gradient(to top, #1a1a1a, #2a2a2a); /* Dégradé gris foncé */
    color: #ffffff; /* Texte en blanc */
}

[data-theme="dark"] .footer-section h4 {
    color: #00FFFF; /* Cyan pour les titres */
    border-bottom: 2px solid #00FFFF; /* Bordure cyan */
}

[data-theme="dark"] .footer-section p, 
[data-theme="dark"] .footer-section ul {
    color: #e0e0e0; /* Texte en gris clair */
}

[data-theme="dark"] .footer-section ul li a {
    color: #00FFFF; /* Liens en cyan */
}

[data-theme="dark"] .footer-section ul li a:hover {
    color: #ffffff; /* Texte en blanc au survol */
}

[data-theme="dark"] .social-links a {
    color: #00FFFF; /* Icônes en cyan */
}

[data-theme="dark"] .social-links a:hover {
    color: #ffffff; /* Icônes en blanc au survol */
}

[data-theme="dark"] .newsletter-form input[type="email"] {
    border: 2px solid #00FFFF; /* Bordure cyan */
    color: #ffffff; /* Texte en blanc */
    background-color: rgba(255, 255, 255, 0.1); /* Fond légèrement transparent */
}

[data-theme="dark"] .newsletter-form button {
    background-color: #00FFFF; /* Bouton cyan */
    color: #000000; /* Texte en noir */
}

[data-theme="dark"] .newsletter-form button:hover {
    background-color: #00CED1; /* Cyan plus foncé au survol */
}

[data-theme="dark"] .footer-bottom {
    color: #e0e0e0; /* Texte en gris clair */
    border-top: 1px solid rgba(255, 255, 255, 0.2); /* Bordure légère */
}

[data-theme="dark"] .footer-bottom a {
    color: #00FFFF; /* Liens en cyan */
}

[data-theme="dark"] .footer-bottom a:hover {
    color: #ffffff; /* Texte en blanc au survol */
}

/* Conteneur du footer */
.footer-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
    text-align: left;
}

/* Sections du footer */
.footer-section {
    flex: 1 1 300px;
    min-width: 250px;
}

.footer-section h4 {
    font-size: 1.3rem;
    margin-bottom: 15px;
    padding-bottom: 5px;
    display: inline-block;
}

.footer-section p, .footer-section ul {
    font-size: 1rem;
    margin: 0;
    line-height: 1.8;
}

.footer-section ul {
    list-style: none;
    padding: 0;
}

.footer-section ul li {
    margin-bottom: 12px;
}

.footer-section ul li a {
    text-decoration: none;
    transition: all 0.3s ease-in-out;
}

.footer-section ul li a:hover {
    transform: translateX(5px);
}

/* Liens sociaux */
.social-links {
    display: flex;
    align-items: center;
    gap: 15px;
}

.social-links a {
    font-size: 1.7rem;
    transition: transform 0.3s ease, color 0.3s ease;
}

.social-links a:hover {
    transform: scale(1.3);
}

/* Formulaire de newsletter */
.newsletter-form {
    display: flex;
    gap: 10px;
}

.newsletter-form input[type="email"] {
    flex-grow: 1;
    padding: 10px;
    border-radius: 5px;
    background-color: transparent;
    transition: all 0.3s ease;
}

.newsletter-form button {
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

/* Section du bas du footer */
.footer-bottom {
    text-align: center;
    margin-top: 30px;
    font-size: 0.9rem;
    padding-top: 15px;
}

.footer-bottom a {
    color: inherit;
    text-decoration: none;
    transition: color 0.3s ease;
}

.footer-bottom a:hover {
    color: #FF6F00; /* Orange au survol */
}

/* Responsive Design */
@media screen and (max-width: 1024px) {
    .footer-container {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .footer-section {
        max-width: 500px;
        margin-bottom: 20px;
    }

    .social-links {
        justify-content: center;
    }
}

@media screen and (max-width: 768px) {
    .footer-container {
        padding: 0 15px;
    }

    .footer-section h4 {
        font-size: 1.1rem;
    }

    .footer-section p, .footer-section ul {
        font-size: 0.9rem;
    }

    .footer-bottom {
        font-size: 0.8rem;
        padding-top: 10px;
    }

    .social-links a {
        font-size: 1.4rem;
    }
}
/* Conteneur pour l'icône du panier ----------------------------------*/
.cart-icon-container {
    position: fixed;
    bottom: 50px; /* Ajustement de la hauteur */
    right: 20px; /* Placer l'icône à droite */
    z-index: 9998;
    animation: bounce 3s ease-in-out infinite; /* Animation plus fluide */
    display: flex;
    justify-content: center;
    align-items: center;
    width: 50px; /* Largeur fixe pour le conteneur */
    height: 50px; /* Hauteur fixe pour le conteneur */
}

/* Icône de panier */
.cart-icon {
    font-size: 40px; /* Réduction de la taille */
    color: #FF8C00; /* Orange foncé */
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
}

/* Compteur du panier */
.cart-icon-container .cart-count {
    position: absolute;
    top: -5px;
    right: -5px;
    background-color:#ff3d00;
    color: white;
    border-radius: 50%;
    font-weight: bold;
    width:16px;
    height: 16px;
    font-size: 12px;
    font-weight: bold;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    border: 2px solid #fff; /* Bordure blanche pour un effet pro */
    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2); /* Ombre légère pour un effet moderne */
}

/* Animation de rebond adoucie */
@keyframes bounce {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-8px); /* Réduction du rebond */
    }
}

/* Styles responsive pour tablettes */
@media (max-width: 768px) {
    .cart-icon-container {
        bottom: 40px;
        right: 15px;
        width: 45px;
        height: 45px;
    }

    .cart-icon {
        font-size: 35px; /* Réduction de la taille sur tablette */
    }

    .cart-count {
        font-size: 9px;
        padding: 2px 5px;
    }
}

/* Styles responsive pour mobiles */
@media (max-width: 480px) {
    .cart-icon-container {
        bottom: 30px;
        right: 10px;
        width: 40px;
        height: 40px;
    }

    .cart-icon {
        font-size: 30px; /* Réduction supplémentaire sur mobile */
    }

    .cart-count {
        font-size: 8px;
        padding: 2px 5px;
    }
}
 
/*----------------------Whatsapp icon-----------------*/
 

@media (min-width: 1024px) { /* Ajuste la taille selon tes besoins */
    .cart-icon-container {
        display: none;
    }
}



:root {
    /* Light theme (default) */
    --primary-dark: #c2410c;
    --primary: #ea580c;
    --primary-light: #fdba74;
    --primary-extra-light: #ffedd5;
    --text-dark: #1f2937;
    --text-medium: #4b5563;
    --text-light: #9ca3af;
    --bg-light: #f9fafb;
    --bg-dark: #ffffff;
    --border-color: #e5e7eb;
    --card-bg: #ffffff;
    --success-color: #10b981;
    --error-color: #ef4444;
    --warning-color: #f59e0b;
    --info-color: #ea580c;
}

[data-theme="dark"] {
    /* Dark theme */
    --primary-dark: #fdba74;
    --primary: #ea580c;
    --primary-light: #9a3412;
    --primary-extra-light: #431407;
    --text-dark: #f9fafb;
    --text-medium: #d1d5db;
    --text-light: #9ca3af;
    --bg-light: #111827;
    --bg-dark: #1f2937;
    --border-color: #374151;
    --card-bg: #1f2937;
    --success-color: #34d399;
    --error-color: #f87171;
    --warning-color: #fbbf24;
    --info-color: #fdba74;
}

.panier-container {
    width: 100%;
    margin: 100px auto 50px;
    padding: 0;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background-color: var(--bg-light);
    color: var(--text-dark);
    min-height: 100vh;
}

.modern-cart {
    background: var(--card-bg);
    border-radius: 0;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
    overflow: hidden;
    transition: all 0.3s ease;
    margin-left: 0;
    margin-right: 0;
    width: 100%;
    border: 1px solid var(--border-color);
}

.cart-header {
    background: linear-gradient(135deg, var(--primary-dark), var(--primary));
    color: white;
    padding: 24px 32px;
    position: relative;
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.cart-title {
    margin: 0;
    font-size: 1.75rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 12px;
}

.cart-icon {
    width: 28px;
    height: 28px;
    stroke-width: 2;
}

.item-count {
    background: rgba(255, 255, 255, 0.2);
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 0.95rem;
    font-weight: 500;
}

.progress-bar {
    height: 6px;
    background: rgba(255, 255, 255, 0.3);
    margin-top: 18px;
    border-radius: 3px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    width: 30%;
    background: white;
    border-radius: 3px;
    transition: width 0.4s ease;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
}

.cart-products {
    padding: 16px;
}

.product-card {
    display: flex;
    gap: 24px;
    padding: 24px;
    border-radius: 12px;
    margin-bottom: 16px;
    background: var(--card-bg);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    border: 1px solid var(--border-color);
    position: relative;
}

.product-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
    border-color: var(--primary-light);
}

/* Correction pour les images en mode dark */
.product-image-container {
    position: relative;
    width: 120px;
    height: 120px;
    flex-shrink: 0;
    border-radius: 10px;
    overflow: hidden;
    background: var(--bg-light); /* Utilise la couleur de fond du thème */
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--border-color); /* Bordure cohérente avec le thème */
}

.product-image {
    width: auto;
    height: auto;
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    transition: transform 0.3s ease;
    padding: 5px; /* Espacement intérieur réduit */
    background-color: transparent; /* Fond transparent */
}

[data-theme="dark"] .product-image {
    mix-blend-mode: normal;
    filter: brightness(0.95) contrast(1.05); /* Légère correction de luminosité */
    padding: 0; /* Pas de padding supplémentaire en dark */
    background-color: transparent;
}

.product-image:hover {
    transform: scale(1.05);
}

.product-badge {
    position: absolute;
    top: 10px;
    left: 10px;
    background: var(--success-color);
    color: white;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
}

.product-info {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}

.info-top {
    flex-grow: 1;
}

.product-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 8px;
}

.product-name {
    font-size: 1.15rem;
    font-weight: 600;
    color: var(--text-dark);
    margin-right: 15px;
    text-decoration: none;
    transition: color 0.2s;
    flex-grow: 1;
}

.product-name:hover {
    color: var(--primary);
}

.product-price {
    font-size: 1.15rem;
    font-weight: 700;
    color: var(--primary-dark);
    white-space: nowrap;
}

.product-meta {
    display: flex;
    gap: 15px;
    margin-bottom: 12px;
    font-size: 0.85rem;
    color: var(--text-medium);
}

.product-sku {
    opacity: 0.8;
}

.product-stock {
    font-weight: 500;
}

.in-stock {
    color: var(--success-color);
}

.product-features {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-top: 12px;
}

.feature {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.85rem;
    color: var(--success-color);
    background: rgba(16, 185, 129, 0.1);
    padding: 4px 10px;
    border-radius: 20px;
}

.product-actions {
    display: flex;
    justify-content: flex-end;
    gap: 16px;
    margin-top: 16px;
}

.compare-btn, .wishlist-btn, .remove-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-medium);
    transition: all 0.2s;
    border-radius: 50%;
}

.compare-btn svg, .wishlist-btn svg, .remove-btn svg {
    width: 20px;
    height: 20px;
    stroke-width: 2;
}

.compare-btn:hover {
    color: var(--info-color);
    background: rgba(234, 88, 12, 0.1);
    transform: scale(1.1);
}

.wishlist-btn:hover {
    color: var(--error-color);
    background: rgba(239, 68, 68, 0.1);
    transform: scale(1.1);
}

.remove-btn:hover {
    color: var(--error-color);
    background: rgba(239, 68, 68, 0.1);
    transform: scale(1.1);
}

.cart-summary {
    padding: 24px;
    background: var(--bg-light);
    border-radius: 12px;
    margin: 24px 16px;
    border: 1px solid var(--border-color);
}

.summary-section {
    margin-bottom: 24px;
}

.summary-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.summary-totals {
    border-top: 1px solid var(--border-color);
    padding-top: 20px;
    margin-top: 20px;
}

.summary-row {
    display: flex;
    justify-content: space-between;
    padding: 12px 0;
    font-size: 0.95rem;
    color: var(--text-dark);
}

.total-row {
    font-size: 1.2rem;
    font-weight: 700;
    padding-top: 16px;
    margin-top: 8px;
    border-top: 1px solid var(--border-color);
}

.total-price {
    color: var(--primary-dark);
}

.secure-checkout {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 20px;
    font-size: 0.85rem;
    color: var(--success-color);
    font-weight: 500;
}

.secure-checkout svg {
    width: 18px;
    height: 18px;
    stroke-width: 2;
}

.cart-footer {
    display: flex;
    justify-content: space-between;
    padding: 24px;
    border-top: 1px solid var(--border-color);
}

.continue-btn, .checkout-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 14px 28px;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    font-size: 1rem;
}

.continue-btn {
    background: var(--card-bg);
    color: var(--primary);
    border: 1px solid var(--primary);
}

.continue-btn:hover {
    background: rgba(234, 88, 12, 0.05);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(234, 88, 12, 0.1);
}

.checkout-btn {
    background: var(--primary);
    color: white;
    border: none;
    box-shadow: 0 4px 16px rgba(234, 88, 12, 0.3);
}

.checkout-btn:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(234, 88, 12, 0.4);
}

.arrow-icon {
    width: 20px;
    height: 20px;
    stroke-width: 2;
}

/* Empty state */
.empty-state {
    padding: 48px 24px;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.empty-icon {
    width: 100px;
    height: 100px;
    margin-bottom: 24px;
    color: var(--text-light);
    opacity: 0.6;
}

.empty-icon svg {
    width: 100%;
    height: 100%;
    stroke-width: 1.5;
}

.empty-title {
    font-size: 1.75rem;
    color: var(--text-dark);
    margin-bottom: 12px;
    font-weight: 700;
}

.empty-message {
    color: var(--text-medium);
    margin-bottom: 32px;
    max-width: 400px;
    line-height: 1.6;
}

.recommendations {
    width: 100%;
    max-width: 500px;
    margin-bottom: 32px;
}

.recommendations h4 {
    font-size: 1.1rem;
    color: var(--text-dark);
    margin-bottom: 16px;
    font-weight: 600;
}

.recommended-products {
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
}

.recommended-product {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    width: 120px;
    cursor: pointer;
    transition: transform 0.2s;
}

.recommended-product:hover {
    transform: translateY(-5px);
}

.recommended-product img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

.recommended-product span {
    font-size: 0.85rem;
    text-align: center;
    color: var(--text-medium);
}

.primary-btn {
    background: var(--primary);
    color: white;
    border: none;
    padding: 14px 32px;
    border-radius: 10px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    transition: all 0.3s;
    text-decoration: none;
    box-shadow: 0 4px 16px rgba(234, 88, 12, 0.3);
}

.primary-btn:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(234, 88, 12, 0.4);
}

.store-icon {
    width: 20px;
    height: 20px;
    stroke-width: 2;
}

/* Theme switcher */
.theme-switcher {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 100;
}

.theme-btn {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: var(--primary);
    color: white;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transition: all 0.3s ease;
}

.theme-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
}

.theme-btn svg {
    width: 24px;
    height: 24px;
}

/* Confirmation overlay */
.confirm-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(5px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.3s;
}

.confirm-overlay.show {
    opacity: 1;
}

.confirm-box {
    background: var(--card-bg);
    padding: 32px;
    border-radius: 16px;
    max-width: 420px;
    width: 90%;
    text-align: center;
    transform: translateY(20px);
    transition: transform 0.3s;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    border: 1px solid var(--border-color);
}

.confirm-overlay.show .confirm-box {
    transform: translateY(0);
}

.confirm-icon {
    width: 72px;
    height: 72px;
    margin: 0 auto 20px;
    color: var(--error-color);
    background: rgba(239, 68, 68, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.confirm-icon svg {
    width: 40px;
    height: 40px;
    stroke-width: 1.5;
}

.confirm-box h3 {
    margin: 0 0 12px;
    font-size: 1.5rem;
    color: var(--text-dark);
    font-weight: 700;
}

.confirm-box p {
    color: var(--text-medium);
    margin-bottom: 28px;
    line-height: 1.6;
}

.confirm-buttons {
    display: flex;
    gap: 16px;
    justify-content: center;
}

.cancel-btn, .confirm-btn {
    padding: 12px 28px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.95rem;
    min-width: 100px;
}

.cancel-btn {
    background: var(--card-bg);
    color: var(--text-dark);
    border: 1px solid var(--border-color);
}

.cancel-btn:hover {
    background: var(--bg-light);
    border-color: var(--text-light);
}

.confirm-btn {
    background: var(--error-color);
    color: white;
    border: none;
}

.confirm-btn:hover {
    background: #dc2626;
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes slideIn {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

/* Responsive */
@media (min-width: 768px) {
    .modern-cart {
        border-radius: 16px;
        margin: 0 auto;
        max-width: 1400px;
        width: calc(100% - 80px);
    }
    
    .panier-container {
        padding: 0 40px;
    }

    .product-card {
        padding: 32px;
    }

    .cart-header {
        padding: 28px 40px;
    }

    .cart-summary {
        padding: 32px;
        margin: 32px 24px;
    }

    .cart-footer {
        padding: 32px;
    }

    .product-image-container {
        width: 140px;
        height: 140px;
    }
}

@media (min-width: 1600px) {
    .modern-cart {
        max-width: 1500px;
    }
}

@media (max-width: 768px) {
    .panier-container {
        margin-top: 80px;
        padding: 0;
    }
    
    .modern-cart {
        border-radius: 0;
    }
    
    .cart-header {
        padding: 20px;
    }
    
    .product-card {
        flex-direction: column;
        gap: 20px;
        padding: 20px;
    }
    
    .product-image-container {
        width: 100%;
        height: 180px;
        margin: 0 auto;
    }
    
    .product-image {
        max-width: 60%;
        max-height: 80%;
    }
    
    .product-actions {
        justify-content: flex-start;
    }
    
    .cart-footer {
        flex-direction: column;
        gap: 16px;
    }
    
    .continue-btn, .checkout-btn {
        justify-content: center;
        width: 100%;
    }

    .theme-switcher {
        bottom: 15px;
        right: 15px;
    }

    .theme-btn {
        width: 45px;
        height: 45px;
    }
}

@media (max-width: 480px) {
    .cart-title {
        font-size: 1.5rem;
    }
    
    .product-card {
        padding: 16px;
    }
    
    .product-header {
        flex-direction: column;
        gap: 8px;
    }
    
    .product-price {
        align-self: flex-start;
    }
    
    .product-image-container {
        height: 150px;
    }

    .product-image {
        max-width: 50%;
    }
    
    .confirm-buttons {
        flex-direction: column;
        gap: 12px;
    }
    
    .cancel-btn, .confirm-btn {
        width: 100%;
    }

    .theme-btn {
        width: 40px;
        height: 40px;
    }

    .theme-btn svg {
        width: 20px;
        height: 20px;
    }
}




:root {
    /* Light theme */
    --form-bg: #ffffff;
    --form-text: #2c3e50;
    --form-border: #e0e0e0;
    --form-input-bg: #f9f9f9;
    --form-icon: #7f8c8d;
    --form-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
    --form-shadow-hover: 0 10px 35px rgba(0, 0, 0, 0.15);
    --primary-gradient: linear-gradient(135deg, #3498db, #2c3e50);
    --primary-gradient-hover: linear-gradient(135deg, #2980b9, #1a252f);
    --focus-border: #3498db;
    --focus-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
    --header-icon: #3498db;
  }
  
  [data-theme="dark"] {
    /* Dark theme */
    --form-bg: #2d3748;
    --form-text: #f7fafc;
    --form-border: #4a5568;
    --form-input-bg: #4a5568;
    --form-icon: #a0aec0;
    --form-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
    --form-shadow-hover: 0 10px 35px rgba(0, 0, 0, 0.4);
    --primary-gradient: linear-gradient(135deg, #2b6cb0, #1a365d);
    --primary-gradient-hover: linear-gradient(135deg, #2c5282, #2a4365);
    --focus-border: #63b3ed;
    --focus-shadow: 0 0 0 3px rgba(99, 179, 237, 0.3);
    --header-icon: #63b3ed;
  }
  
  /* Styles modernes */
  .order-form-container {
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
      max-width: 600px;
      margin: 20px auto;
      padding: 0 15px;
  }
  
  .order-form-card {
      background: var(--form-bg);
      border-radius: 12px;
      box-shadow: var(--form-shadow);
      padding: 25px;
      transition: all 0.3s ease;
      color: var(--form-text);
  }
  
  .order-form-card:hover {
      box-shadow: var(--form-shadow-hover);
  }
  
  .form-header {
      display: flex;
      align-items: center;
      margin-bottom: 25px;
      color: var(--form-text);
  }
  
  .form-header i {
      font-size: 24px;
      margin-right: 15px;
      color: var(--header-icon);
  }
  
  .form-header h3 {
      margin: 0;
      font-size: 22px;
      font-weight: 600;
  }
  
  .modern-form .form-group {
      position: relative;
      margin-bottom: 20px;
  }
  
  .modern-form .form-group i {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--form-icon);
      font-size: 16px;
  }
  
  .modern-form input {
      width: 100%;
      padding: 14px 20px 14px 45px;
      border: 1px solid var(--form-border);
      border-radius: 8px;
      font-size: 16px;
      transition: all 0.3s;
      background-color: var(--form-input-bg);
      color: var(--form-text);
  }
  
  .modern-form input::placeholder {
      color: var(--form-icon);
      opacity: 0.8;
  }
  
  .modern-form input:focus {
      border-color: var(--focus-border);
      box-shadow: var(--focus-shadow);
      outline: none;
      background-color: var(--form-bg);
  }
  
  .submit-btn {
      width: 100%;
      padding: 14px;
      background: var(--primary-gradient);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
  }
  
  .submit-btn:hover {
      background: var(--primary-gradient-hover);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  }
  
  /* Animations communes (déjà définies dans le modal) */

:root {
    /* Couleurs light theme */
    --bg-color: #ffffff;
    --text-color: #333333;
    --secondary-text: #666666;
    --border-color: #eeeeee;
    --modal-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    --close-btn-bg-hover: #f5f5f5;
    --secondary-btn-bg: #f8f9fa;
    --secondary-btn-hover: #e2e6ea;
    --overlay-color: rgba(0, 0, 0, 0.6);
    
    /* Couleurs communes */
    --success-color: #28a745;
    --success-light: rgba(40, 167, 69, 0.1);
    --error-color: #dc3545;
    --error-light: rgba(220, 53, 69, 0.1);
    --warning-color: #ffc107;
    --warning-light: rgba(255, 193, 7, 0.1);
    --whatsapp-color: #25D366;
    --whatsapp-hover: #128C7E;
  }
  
  [data-theme="dark"] {
    /* Couleurs dark theme */
    --bg-color: #2d3748;
    --text-color: #f7fafc;
    --secondary-text: #cbd5e0;
    --border-color: #4a5568;
    --modal-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    --close-btn-bg-hover: #4a5568;
    --secondary-btn-bg: #4a5568;
    --secondary-btn-hover: #718096;
    --overlay-color: rgba(0, 0, 0, 0.8);
  }
  
  /* Modal moderne */
  .modern-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: var(--overlay-color);
      z-index: 10000;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s ease-out;
      backdrop-filter: blur(5px);
  }
  
  .modal-content {
      background: var(--bg-color);
      border-radius: 16px;
      width: 90%;
      max-width: 450px;
      box-shadow: var(--modal-shadow);
      position: relative;
      overflow: hidden;
      animation: slideUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      color: var(--text-color);
  }
  
  .modal-body {
      padding: 40px 30px;
      text-align: center;
  }
  
  .close-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      font-size: 1.2rem;
      color: var(--secondary-text);
      cursor: pointer;
      transition: all 0.2s;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
  }
  
  .close-btn:hover {
      color: var(--text-color);
      background: var(--close-btn-bg-hover);
  }
  
  .icon-container {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      font-size: 36px;
  }
  
  .icon-container.pulse {
      animation: pulse 1.5s infinite;
  }
  
  .success-content .icon-container {
      background-color: var(--success-light);
      color: var(--success-color);
  }
  
  .alert-message.error .icon-container {
      background-color: var(--error-light);
      color: var(--error-color);
  }
  
  .alert-message.warning .icon-container {
      background-color: var(--warning-light);
      color: var(--warning-color);
  }
  
  .modal-body h2 {
      margin: 0 0 15px;
      color: var(--text-color);
      font-size: 1.5rem;
      font-weight: 600;
  }
  
  .modal-body p {
      color: var(--secondary-text);
      line-height: 1.5;
      margin-bottom: 25px;
  }
  
  .success-text {
      font-size: 1rem;
  }
  
  .modal-btn {
      display: inline-block;
      padding: 12px 24px;
      background: var(--success-color);
      color: white;
      border: none;
      border-radius: 50px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 10px;
      width: 100%;
      max-width: 200px;
  }
  
  .modal-btn:hover {
      background: #218838;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
  }
  
  .modal-btn.secondary {
      background: var(--secondary-btn-bg);
      color: var(--text-color);
      margin-top: 15px;
  }
  
  .modal-btn.secondary:hover {
      background: var(--secondary-btn-hover);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
  
  .whatsapp-action {
      margin: 25px 0;
      padding: 20px 0;
      border-top: 1px solid var(--border-color);
      border-bottom: 1px solid var(--border-color);
  }
  
  .whatsapp-desc {
      font-size: 0.9rem;
      margin-bottom: 15px;
      color: var(--secondary-text);
  }
  
  .whatsapp-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 12px 24px;
      background: var(--whatsapp-color);
      color: white;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s;
      width: 100%;
      max-width: 200px;
      margin: 0 auto;
  }
  
  .whatsapp-btn:hover {
      background: var(--whatsapp-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
  }
  
  .whatsapp-btn i {
      margin-right: 8px;
      font-size: 1.2rem;
  }
  
  /* Animations */
  @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
  }
  
  @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
  }
  
  @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
  }
  
  /* Responsive */
  @media (max-width: 480px) {
      .modal-body {
          padding: 30px 20px;
      }
      
      .modal-body h2 {
          font-size: 1.3rem;
      }
      
      .icon-container {
          width: 70px;
          height: 70px;
          font-size: 32px;
      }
  }



 /* Variables communes */
:root {
    --like-color-light: #FF6347;
    --like-color-dark: #00FFFF;
    --count-bg:#ff3d00;
    --count-text: white;
}

/* Style de base */
.nav-link.likes {
    position: relative;
    display: flex;
    align-items: center;
    transition: all 0.3s ease;
    width:50px;
    height:50px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    border-radius: 50%;
    background:#FF6347;
    text-align:center;
    padding: 10px; /* Espacement interne */
}
.nav-link.likes i {
 margin-left:5px;
 
}
.nav-link.likes .count {
    position: absolute;
    top: -4px;
    right: -4px;
    background: var(--count-bg);
    color: var(--count-text);
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 0.8rem; /* Taille du texte */
    padding: 4px 8px; /* Espacement interne */
}

/* Effets hover */

.nav-link.likes  i {
    color:white;
}
[data-theme="light"] .navbar .nav-link.likes:hover:hover {
    background-color: #FF4500; /* Orange plus foncé au survol */
}
/* Thème sombre */
[data-theme="dark"] .nav-link.likes i {
    color: #001F3F;
}
[data-theme="dark"] .nav-link.likes {
    color: #001F3F;
    background:#00FFFF;
}

[data-theme="dark"] .nav-link.likes .count {
    background: var(--count-bg);
    color: white;
    border-color: #001F3F;
}
 


/* Caché par défaut sur desktop */
.mobile-cart-fab {
    display: none;
    position: fixed;
    bottom: 24px;
    right: 24px;
    z-index: 1000;
}

.cart-fab {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15), 0 4px 8px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.cart-fab:active {
    transform: scale(0.92);
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

.cart-icon {
    width: 24px;
    height: 24px;
    color: white;
}

/* Nouveau style pour le badge mobile - Orange vif contrasté */
.cart-counter-mobil {
    position: absolute;
    top: -6px;
    right: -6px;
    background: red; /* Orange vif Material Design */
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
    border: 2px solid white;
    font-family: 'Roboto', sans-serif;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

/* Animation micro-interaction */
@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

.cart-fab:hover .cart-icon {
    animation: bounce 0.6s ease;
}

/* Affichage seulement sur mobile */
@media (max-width: 768px) {
    .mobile-cart-fab {
        display: block;
    }
}

/* Animation du badge */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.pulse-badge {
    animation: pulse 0.5s ease-in-out;
}

</style>
</head>

<body>
    <nav class="navbar">
        <!-- Logo et nom de la plateforme -->
        <a class="navbar-brand">
            <img src="{% if logo %}{{ logo }}{% else %}{% static 'logo2.png' %}{% endif %}" alt="Logo de la boutique" class="nav-logo">
            <span class="brand-name">{% if shop_name %}{{ shop_name }}{% else %}Nom de la boutique{% endif %}</span>
        </a>
    
        <!-- Barre de recherche centrale -->
        <div class="search-wrapper">
            <div class="search-box">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="search-input" placeholder="Rechercher un produit..." class="search-input" onfocus="openModalProduitPanier()">
            </div>
        </div>
    
        <!-- Menu principal -->
        <div class="nav-menu">
            <a href="{{home_boutique}}" class="nav-link">
                <i class="fas fa-home"></i>
                <span>Accueil</span>
            </a>
            <a href="{% url 'panier' utilisateur_identifiant=utilisateur_identifiant %}" class="nav-link panier">
                <i class="fa-solid fa-cart-shopping"></i> <!-- Icône du panier -->
                <div id="cart-count-nav" class="cart-count">0</div> <!-- Compteur de panier -->
            </a>
            <a href="{% url 'likes_site' utilisateur_identifiant=utilisateur_identifiant %}" class="nav-link likes">
                <i class="fa-solid fa-heart"></i>
                <div id="likes-count-nav" class="count">0</div>
            </a>        
            <a href="https://api.whatsapp.com/send/?phone=224{{utilisateur_numero}}" class="nav-link contact-link">
                <i class="fab fa-whatsapp"></i>
                <span>Contact</span>
            </a>
        </div>
    
        <!-- Menu hamburger pour mobile -->
        <button class="hamburger-btn" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
        </button>
    </nav>
  
   <!-- Ajouter l'ID utilisateur dans un attribut 'data' -->
   <div id="user-data" data-user-id="{{user_id}}"></div>

 <!-- Icône de basculement de mode -->
<div id="theme-toggle" class="theme-toggle">
    <i id="theme-icon" class="fas fa-moon"></i> <!-- Icône de lune par défaut -->
</div>

<!-- Icône de panier moderne responsive -->
<div class="mobile-cart-fab">
    <a href="{% url 'panier' utilisateur_identifiant=utilisateur_identifiant %}" aria-label="Panier" class="cart-fab">
        <span class="cart-counter-mobil">0</span>
        <svg class="cart-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path fill="currentColor" d="M17 18a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.11.89-2 2-2M1 2h3.27l.94 2H20a1 1 0 0 1 1 1c0 .17-.05.34-.12.5l-3.58 6.47c-.34.61-1 1.03-1.75 1.03H8.1l-.9 1.63-.03.12a.25.25 0 0 0 .25.25H19v2H7a2 2 0 0 1-2-2c0-.35.09-.68.24-.96l1.36-2.45L3.31 5H1M7 18a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.11.89-2 2-2m9-7l2.78-5H6.14l2.36 5Z"/>
        </svg>
    </a>
</div>

 <!-----------------------------Section des sliders des produits--------------------------->
  <!-- Ajouter l'ID utilisateur dans un attribut 'data' -->
<div id="user-data" data-user-id="{{ user_id }}"></div>

<div class="panier-contenair" style="margin-top: 200px;">
    <!-- Contenu chargé dynamiquement -->
</div>

<!-- Bouton optionnel pour rafraîchissement manuel -->
<button data-refresh-cart class="btn btn-sm btn-secondary">
    <i class="fas fa-sync-alt"></i> Actualiser
</button>

 <!-- Formulaire modernisé -->
<div class="order-form-container">
    <div class="order-form-card">
        <div class="form-header">
            <i class="fas fa-paper-plane"></i>
            <h3>Envoyer votre commande</h3>
        </div>
        <form method="post" action="{% url 'envoyer_commande' user_id=user_id %}" class="modern-form" id="commande-form">
            {% csrf_token %}
            <div class="form-group">
                <i class="fas fa-user"></i>
                <input type="text" name="name" placeholder="Nom du client" required>
            </div>
            <div class="form-group">
                <i class="fas fa-phone"></i>
                <input type="text" name="phone" placeholder="Numéro du client" required>
            </div>
            <div class="form-group">
                <i class="fas fa-map-marker-alt"></i>
                <input type="text" name="lieu_de_livraison" placeholder="Lieu de livraison" required>
            </div>
            <button type="submit" class="submit-btn" id="submit-button">
                <i class="fas fa-paper-plane"></i> Envoyer la commande
                <span class="spinner hidden" id="submit-spinner"></span>
            </button>
        </form>        
    </div>
</div>
<!-- Modal ultra moderne -->
<div id="confirmation-modal-boutique" class="modern-modal">
    <div class="modal-content">
        <div class="modal-body">
            {% if messages %}
                {% for message in messages %}
                    {% if 'error' in message.tags or 'warning' in message.tags %}
                        <div class="alert-message {{ message.tags }}">
                            <div class="icon-container">
                                <i class="fas {% if 'error' in message.tags %}fa-times-circle{% else %}fa-exclamation-triangle{% endif %}"></i>
                            </div>
                            <h2>{% if 'error' in message.tags %}Erreur{% else %}Attention{% endif %}</h2>
                            <p>{{ message }}</p>
                            <button class="modal-btn" onclick="closeModal()">Compris</button>
                        </div>
                    {% else %}
                        <div class="success-content">
                            <div class="icon-container pulse">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <h2>Commande confirmée!</h2>
                            <p class="success-text">Merci pour votre confiance. Votre commande a bien été enregistrée.</p>
                            
                            <div class="whatsapp-action">
                                <p class="whatsapp-desc">Finalisez votre commande en cliquant sur WhatsApp</p>
                                <a href="https://api.whatsapp.com/send/?phone=224{{utilisateur_numero}}&text=Bonjour,%20j'ai%20effectu%C3%A9%20une%20commande%20sur%20votre%20boutique%20{{ boutique }}.%20J'aimerais%20savoir%20si%20ma%20commande%20a%20%C3%A9t%C3%A9%20bien%20prise%20en%20compte%20et%20quelles%20sont%20les%20%C3%A9tapes%20suivantes.%20Merci%20beaucoup!&type=phone_number&app_absent=0" target="_blank" class="whatsapp-btn">
                                    <i class="fab fa-whatsapp"></i> WhatsApp
                                </a>
                            </div>
                            <button class="modal-btn secondary" onclick="closeModal()">Fermer</button>
                        </div>
                    {% endif %}
                {% endfor %}
            {% endif %}
        </div>
        <button class="close-btn" onclick="closeModal()">
            <i class="fas fa-times"></i>
        </button>
    </div>
</div>
<!-- Modal de recherche produits -->
<div id="modal-produit-panier" class="modal-produit-panier">
    <div class="modal-produit-panier-content">
        <div class="modal-produit-panier-header">
            <h5 class="modal-produit-panier-title">Filtrer et rechercher des produits</h5>
            <button type="button" class="modal-produit-panier-close-btn" aria-label="Fermer">&times;</button>
        </div>
        <div class="modal-produit-panier-body">
            <!-- Barre de recherche et filtres -->
            <div class="modal-produit-panier-search-filters">
                <div class="modal-produit-panier-search-input">
                    <input id="modal-produit-panier-search-input" type="search" placeholder="🔍 Rechercher un produit..." aria-label="Search">
                </div>
                <div class="modal-produit-panier-price-input">
                    <input type="number" id="modal-produit-panier-min-price" placeholder="💰 Prix min">
                </div>
                <div class="modal-produit-panier-price-input">
                    <input type="number" id="modal-produit-panier-max-price" placeholder="💰 Prix max">
                </div>
                <button class="modal-produit-panier-apply-btn">
                    <span>Appliquer</span>
                </button>
            </div>
            <div id="modal-produit-panier-product-container" class="modal-produit-panier-product-section">
                <div class="modal-produit-panier-product-grid" id="modal-produit-panier-product-container">
                    <!-- Les produits filtrés ou recherchés apparaîtront ici -->
                </div>
            </div>
        </div>
    </div>
</div>
 <!-----------------------------Section du footer--------------------------->
 <footer class="footer">
    <div class="footer-container">
        <!-- Section Contact -->
        <div class="footer-section">
            <h4>Contactez-nous</h4>
            {% if utilisateur_email %}
                <p>Email : {{ utilisateur_email }}</p>
            {% else %}
                <p>Email : Non disponible</p>
            {% endif %}
            
            {% if utilisateur_numero %}
                <p>Téléphone : {{ utilisateur_numero }}</p>
            {% else %}
                <p>Téléphone : Non disponible</p>
            {% endif %}
            
            {% if localisation %}
                <p>Adresse : {{ localisation.repere }}, {{ localisation.ville }}, Guinée</p>
            {% else %}
                <p>Adresse : Non disponible</p>
            {% endif %}
        </div>
        <!-- Section Réseaux sociaux -->
        <div class="footer-section">
            <h4>Suivez-nous</h4>
            <div class="social-links">
                 <a href="https://www.facebook.com/profile.php?id=61572862923573&mibextid=ZbWKwL"><i class="fab fa-facebook"></i></a>
                <a href="https://x.com/warabaguinee?t=OYWsxA-GIp7q-o_RqBBxfg&s=09"><i class="fab fa-twitter"></i></a>
                <a href="https://www.instagram.com/waraba_guinee?igsh=YW41eHdycW9vOXFh"><i class="fab fa-instagram"></i></a>
                <a href="https://www.linkedin.com/in/waraba-guinee-b97a7634a"><i class="fab fa-linkedin"></i></a>
                <a href="https://youtube.com/@warabaguinee-t4n?si=thaA8V83oN8EKxQp"><i class="fab fa-youtube"></i></a>
                <a href="https://www.tiktok.com/@waraba.guinee?_t=ZM-8vKN1U86U10&_r=1"><i class="fab fa-tiktok"></i></a>
            </div>
        </div>

        <!-- Section Paiement sécurisé -->
        <div class="footer-section">
            <h4>Paiement sécurisé</h4>
            <p>Nous offrons des options de paiement sécurisé via Orange Money.</p>
        </div>
    </div>
    
    <!-- Footer bottom section -->
    <div class="footer-bottom">
        <p>&copy; 2025 Boutique Moderne. Tous droits réservés.</p>
        <p><a href="#privacy-policy">Politique de confidentialité</a> | <a href="#terms-of-service">Conditions d'utilisation</a></p>
    </div>
</footer>
<!-- Ajout de Font Awesome si besoin -->
<script src="https://kit.fontawesome.com/YOUR_KIT_CODE.js" crossorigin="anonymous"></script>

<!-- Ajout de jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Ajout de Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="{% static 'homeJs/navigateurControle.js' %}"></script>
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="{% static 'homeJs/navigateurControle.js' %}"></script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

<!-- ---------------------------// API gestion des categories produits  ---------------------------------->
<script>
    (function() {
        'use strict';

        // Configuration centrale
        const CONFIG = {
            RETRY_DELAY: 3000,
            MAX_RETRIES: 3,
            ANIMATION_DURATION: 1000,
            ERROR_VALUES: {
                LIKES: 0,
                CART_ITEMS: 0
            },
            SELECTORS: {
                LIKES: {
                    NAV: "#likes-count-nav",
                    SIDEBAR: "#sidebar-like-count"
                },
                CART: {
                    SIDEBAR: "#car-count-sidebar",
                    NAV: "#cart-count-nav",
                    MOBILE: ".cart-counter-mobil"
                }
            }
        };

        // Fonction de mise à jour avec réessais
        function updateWithRetry(url, successHandler, errorHandler, retryCount = 0) {
            $.ajax({
                url: url,
                method: "GET",
                dataType: "json",
                timeout: 10000,
                success: successHandler,
                error: function(xhr, status, error) {
                    if (retryCount < CONFIG.MAX_RETRIES) {
                        setTimeout(() => {
                            updateWithRetry(url, successHandler, errorHandler, retryCount + 1);
                        }, CONFIG.RETRY_DELAY);
                    } else {
                        errorHandler();
                    }
                }
            });
        }

        // Fonction générique pour mettre à jour les éléments
        function updateElements(values, selectors, animationClass = '') {
            Object.entries(selectors).forEach(([key, selector]) => {
                const elements = $(selector);
                const currentValue = elements.first().text();
                const newValue = values[key] || CONFIG.ERROR_VALUES[key] || 0;

                elements.text(newValue);

                // Animation si la valeur a changé et est > 0
                if (animationClass && newValue > 0 && currentValue !== String(newValue)) {
                    elements.addClass(animationClass);
                    setTimeout(() => {
                        elements.removeClass(animationClass);
                    }, CONFIG.ANIMATION_DURATION);
                }
            });
        }

        // Mise à jour des likes
        function updateLikes() {
            updateWithRetry(
                "/obtenir_like/",
                function(data) {
                    updateElements(
                        {
                            NAV: data.total_likes,
                            SIDEBAR: data.total_likes
                        },
                        CONFIG.SELECTORS.LIKES,
                        "pulse"
                    );
                },
                function() {
                    updateElements(
                        {
                            NAV: CONFIG.ERROR_VALUES.LIKES,
                            SIDEBAR: CONFIG.ERROR_VALUES.LIKES
                        },
                        CONFIG.SELECTORS.LIKES
                    );
                }
            );
        }

        // Mise à jour du panier
        function updateCartCount() {
            updateWithRetry(
                "/obtenir_panier/",
                function(data) {
                    updateElements(
                        {
                            SIDEBAR: data.total_articles,
                            NAV: data.total_articles,
                            MOBILE: data.total_articles
                        },
                        CONFIG.SELECTORS.CART,
                        "pulse"
                    );
                },
                function() {
                    updateElements(
                        {
                            SIDEBAR: CONFIG.ERROR_VALUES.CART_ITEMS,
                            NAV: CONFIG.ERROR_VALUES.CART_ITEMS,
                            MOBILE: CONFIG.ERROR_VALUES.CART_ITEMS
                        },
                        CONFIG.SELECTORS.CART
                    );
                }
            );
        }

        // Initialisation
        $(document).ready(function() {
            try {
                updateLikes();
                updateCartCount();
            } catch (e) {
                console.error("Erreur d'initialisation:", e);
            }
        });

        // Écoute des événements personnalisés
        $(document)
            .on('cartUpdated', updateCartCount)
            .on('likesUpdated', updateLikes);

        // Export pour débogage (optionnel)
        window.debugCounters = {
            updateLikes,
            updateCartCount
        };
    })();
</script>
<script>
    (function() {
        'use strict';

        // 1. Initialisation sécurisée du spinner
        function initSpinner() {
            if (!document.getElementById('modern-spinner-overlay')) {
                const spinnerHTML = `
                    <div id="modern-spinner-overlay" style="
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(255, 255, 255, 0.8);
                        display: none;
                        justify-content: center;
                        align-items: center;
                        z-index: 9999;
                        backdrop-filter: blur(2px);
                    ">
                        <div class="spinner-core" style="
                            width: 60px;
                            height: 60px;
                            border: 5px solid #f3f3f3;
                            border-top: 5px solid #3b82f6;
                            border-radius: 50%;
                            animation: spin 1s linear infinite;
                        "></div>
                    </div>
                `;
                document.body.insertAdjacentHTML('beforeend', spinnerHTML);
            }
        }

        // 2. Injection des styles avec vérification d'existence
        function injectStyles() {
            if (!document.getElementById('dynamic-spinner-styles')) {
                const style = document.createElement('style');
                style.id = 'dynamic-spinner-styles';
                style.textContent = `
                    @keyframes spin {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }
                    
                    .form-disabled {
                        opacity: 0.7;
                        pointer-events: none;
                    }
                    
                    #modern-spinner-overlay {
                        transition: opacity 0.3s ease;
                    }
                `;
                document.head.appendChild(style);
            }
        }

        // 3. Gestion robuste des formulaires
        function handleFormSubmission() {
            const commandeForm = document.getElementById('commande-form');
            
            if (commandeForm) {
                commandeForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const spinnerOverlay = document.getElementById('modern-spinner-overlay');
                    if (!spinnerOverlay) return;
                    
                    // Double vérification des éléments
                    const form = this;
                    const submitButton = form.querySelector('[type="submit"]');
                    
                    // Désactivation sécurisée
                    if (submitButton) {
                        submitButton.disabled = true;
                        submitButton.setAttribute('data-original-text', submitButton.textContent);
                        submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Traitement...';
                    }
                    
                    spinnerOverlay.style.display = 'flex';
                    document.body.classList.add('form-disabled');
                    
                    // Soumission avec gestion d'erreur
                    setTimeout(() => {
                        try {
                            if (form.checkValidity()) {
                                form.submit();
                            } else {
                                throw new Error('Formulaire invalide');
                            }
                        } catch (error) {
                            console.error('Erreur de soumission:', error);
                            spinnerOverlay.style.display = 'none';
                            document.body.classList.remove('form-disabled');
                            
                            if (submitButton) {
                                submitButton.disabled = false;
                                submitButton.textContent = submitButton.getAttribute('data-original-text');
                            }
                            
                            // Afficher un message d'erreur utilisateur
                            alert('Une erreur est survenue. Veuillez réessayer.');
                        }
                    }, 150);
                });
            }
        }

        // 4. Gestion modale améliorée
        function setupModal() {
            const modal = document.getElementById('confirmation-modal-boutique');
            
            if (modal) {
                // Ouverture modale conditionnelle
                const shouldOpen = document.querySelector('.alert-message, .success-content') !== null;
                if (shouldOpen) {
                    modal.style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                }
                
                // Fermeture modale sécurisée
                const closeModal = () => {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                };
                
                // Gestionnaires d'événements protégés
                document.querySelectorAll('.modal-btn, .close-btn').forEach(btn => {
                    btn.removeEventListener('click', closeModal); // Nettoyage préalable
                    btn.addEventListener('click', closeModal);
                });
                
                // Fermeture au clic externe
                modal.addEventListener('click', function(event) {
                    if (event.target === modal) {
                        closeModal();
                    }
                });
            }
        }

        // 5. Initialisation séquentielle sécurisée
        document.addEventListener('DOMContentLoaded', function() {
            try {
                initSpinner();
                injectStyles();
                handleFormSubmission();
                setupModal();
            } catch (error) {
                console.error('Erreur d\'initialisation:', error);
                // Fallback minimaliste
                const forms = document.querySelectorAll('form');
                forms.forEach(form => {
                    form.addEventListener('submit', () => {
                        alert('Chargement en cours...');
                    });
                });
            }
        });

        // 6. Gestion des erreurs non capturées (safety net)
        window.addEventListener('error', function(event) {
            console.error('Erreur non capturée:', event.error);
            const spinner = document.getElementById('modern-spinner-overlay');
            if (spinner) spinner.style.display = 'none';
            document.body.classList.remove('form-disabled');
        });
    })();
</script>

<script>
    // Fonction utilitaire pour récupérer les cookies avec sécurisation améliorée
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                // Vérification stricte pour éviter les faux positifs
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    
    // Fonction pour afficher un message d'erreur stylisé avec gestion améliorée
    function afficherErreur(message, isFatal = false) {
        // Nettoyage préalable pour éviter les doublons
        $('.alert.alert-danger').remove();
        
        const errorHtml = `
            <div class="alert alert-danger ${isFatal ? 'fatal-error' : ''}" role="alert">
                <i class="fas fa-exclamation-circle"></i> ${message}
                <button onclick="location.reload()" class="btn btn-sm btn-link">Réessayer</button>
            </div>
        `;
        
        $('.panier-contenair').html(errorHtml);
        
        if (isFatal) {
            $('.cart-counter, #cart-count-nav, .cart-counter-mobil').text('0');
            $('.panier-contenair').addClass('panier-vide');
        }
    }
    
    // Fonction pour afficher le spinner avec gestion de cache
    let spinnerTimeout;
    function showSpinner(customMessage = '') {
        // Annule tout spinner précédent en attente
        if (spinnerTimeout) clearTimeout(spinnerTimeout);
        
        const defaultMessage = customMessage || 'Chargement en cours...';
        $('.panier-contenair').html(`
            <div class="text-center py-4 spinner-container">
                <i class="fas fa-spinner fa-spin fa-2x"></i>
                <p class="mt-2">${defaultMessage}</p>
            </div>
        `);
        
        return new Promise(resolve => {
            spinnerTimeout = setTimeout(resolve, 1000);
        });
    }
    
    // Fonction principale pour charger le panier avec gestion améliorée des états
    async function chargerPanier() {
        try {
            // Affiche le spinner avec un léger délai pour éviter le clignotement sur les connexions rapides
            await new Promise(resolve => setTimeout(resolve, 50));
            await showSpinner();
            
            const response = await $.ajax({
                url: '/obtenir_panier_table/',
                type: 'GET',
                dataType: 'json',
                cache: false,
                timeout: 10000, // 10 secondes timeout
                headers: {
                    'Cache-Control': 'no-cache'
                }
            });
    
            if (response.status === 'success') {
                updateCartUI(response);
            } else {
                afficherErreur(response.message || 'Erreur lors du chargement du panier');
            }
        } catch (error) {
            handleAjaxError(error);
        } finally {
            if (spinnerTimeout) clearTimeout(spinnerTimeout);
        }
    }
    
    // Mise à jour de l'interface du panier avec animations améliorées
    function updateCartUI(response) {
        if (!response.panier_html) {
            console.error('Réponse invalide:', response);
            afficherErreur('Format de données invalide');
            return;
        }
    
        $('.panier-contenair')
            .hide()
            .html(response.panier_html)
            .fadeIn(300, function() {
                // Déclenche un recalcul des styles pour forcer le rendu
                $(this).css('opacity', '1');
            });
        
        const nbArticles = response.data?.articles?.length || 0;
        updateCartCounters(nbArticles);
        
        $('.panier-contenair').toggleClass('panier-vide', nbArticles === 0);
    }
    
    // Mise à jour des compteurs de panier avec animation améliorée
    function updateCartCounters(count) {
        const counters = $('.cart-counter, #car-count-sidebar, #cart-count-nav, .cart-counter-mobil');
        const currentCount = parseInt(counters.first().text()) || 0;
        
        // Animation seulement si le count change
        if (currentCount !== count) {
            counters.text(count);
            
            if (count > 0) {
                counters.addClass('pulse');
                setTimeout(() => counters.removeClass('pulse'), 1000);
            }
        }
    }
    
    // Gestion des erreurs AJAX avec plus de détails
    function handleAjaxError(error) {
        console.error('Erreur AJAX:', error);
        
        let errorMessage = 'Erreur inconnue';
        if (error.status === 0) {
            errorMessage = 'Problème de connexion - Vérifiez votre réseau';
        } else if (error.status === 500) {
            errorMessage = 'Erreur serveur - Veuillez réessayer plus tard';
        } else if (error.statusText === 'timeout') {
            errorMessage = 'Temps écoulé - Le serveur met trop de temps à répondre';
        } else if (error.responseJSON?.message) {
            errorMessage = error.responseJSON.message;
        }
        
        afficherErreur(errorMessage, error.status !== 404);
    }
    
    // Fonction pour confirmer la suppression avec gestion améliorée des événements
    function confirmRemove(itemId, itemType) {
        const overlay = $('#confirm-overlay');
        if (!overlay.length) {
            console.error('Overlay de confirmation introuvable');
            return;
        }
        
        overlay.css('display', 'flex');
        setTimeout(() => overlay.addClass('show'), 10);
        
        overlay.data({
            itemId: itemId,
            itemType: itemType
        });
        
        // Nettoyage des événements précédents pour éviter les doublons
        $('#confirm-cancel').off('click').on('click', () => hideOverlay(overlay));
        $('#confirm-remove').off('click').on('click', () => proceedWithRemoval(overlay));
    }
    
    // Cacher l'overlay de confirmation avec gestion améliorée
    function hideOverlay(overlay) {
        overlay.removeClass('show');
        setTimeout(() => {
            overlay.css('display', 'none');
            overlay.removeData('itemId').removeData('itemType');
        }, 300);
    }
    
    // Procéder à la suppression avec validation
    function proceedWithRemoval(overlay) {
        const csrfToken = getCookie('csrftoken');
        const { itemId, itemType } = overlay.data();
        
        if (!itemId || !itemType) {
            console.error('Données manquantes pour la suppression');
            return;
        }
        
        hideOverlay(overlay);
        retirerElementDuPanier(itemId, itemType, csrfToken);
    }
    
    // Fonction pour supprimer un élément du panier avec gestion améliorée
    async function retirerElementDuPanier(itemId, itemType, csrfToken) {
        if (!csrfToken) {
            afficherErreur('Erreur de sécurité - Token manquant', true);
            return;
        }
    
        try {
            const url = `/retirer-du-panier/${itemId}/${itemType}/`;
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': csrfToken,
                    'Content-Type': 'application/json',
                },
                credentials: 'same-origin'
            });
    
            if (!response.ok) {
                throw new Error(`Erreur HTTP: ${response.status}`);
            }
            
            const data = await response.json();
            
            if (data.status === 'removed_from_cart') {
                await handleSuccessfulRemoval(itemId, data);
            } else if (data.status === 'not_in_cart') {
                console.warn('Item n\'était pas dans le panier');
                mettreAJourInterface(data);
            } else {
                throw new Error(data.message || 'Statut de réponse inattendu');
            }
        } catch (error) {
            handleRemovalError(error);
        }
    }
    
    // Gestion de la suppression réussie avec animation améliorée
    async function handleSuccessfulRemoval(itemId, data) {
        const itemCard = $(`[data-id="${itemId}"]`);
        if (itemCard.length) {
            itemCard.css({
                transition: 'all 0.3s ease',
                transform: 'translateX(100%)',
                opacity: '0'
            });
            
            await new Promise(resolve => setTimeout(resolve, 300));
            itemCard.remove();
        }
        
        mettreAJourInterface(data);
        await refreshCartAfterRemoval();
    }
    
    // Rafraîchir le panier après suppression avec gestion d'état
    async function refreshCartAfterRemoval() {
        try {
            await showSpinner('Mise à jour du panier...');
            const response = await $.get('/obtenir_panier_table/');
            
            if (response.panier_html) {
                $('.panier-contenair').html(response.panier_html);
            } else {
                throw new Error('Réponse invalide du serveur');
            }
        } catch (error) {
            handleAjaxError(error);
        }
    }
    
    // Gestion des erreurs de suppression avec feedback utilisateur
    function handleRemovalError(error) {
        console.error('Erreur de suppression:', error);
        
        const errorMessage = error.message.includes('réseau') 
            ? 'Problème de connexion - Vérifiez votre réseau' 
            : error.message.includes('Token') 
                ? 'Erreur de sécurité - Veuillez actualiser la page'
                : 'Échec de la suppression - Veuillez réessayer';
        
        $('.panier-contenair').prepend(`
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
                ${errorMessage}
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        `);
    }
    
    // Mise à jour complète de l'interface avec validation
    function mettreAJourInterface(data) {
        if (!data || typeof data.total_articles === 'undefined') {
            console.error('Données de mise à jour invalides:', data);
            return;
        }
    
        // Mise à jour du nombre d'articles
        $('.item-count').text(`${data.total_articles} article(s)`);
        
        // Mise à jour des totaux avec vérification
        if (data.new_total !== undefined) {
            $('.total-price, .subtotal-price').each(function() {
                $(this).text(`${data.new_total} ${$(this).data('currency') || 'FG'}`);
            });
        }
        
        // Mise à jour des compteurs avec animation
        updateCartCounters(data.total_articles);
        
        // Gestion du panier vide
        $('.panier-contenair').toggleClass('panier-vide', data.total_articles === 0);
    }
    
    // Initialisation du document avec gestion améliorée des événements
    $(document).ready(function() {
        // Chargement initial avec vérification de l'état
        if ($('.panier-contenair').length) {
            chargerPanier();
        } else {
            console.warn('Conteneur du panier introuvable');
        }
        
        // Gestion des événements avec délégation améliorée
        $(document)
            .on('ajax:success', '[data-ajax-cart]', function(e, data) {
                if (data.status === 'success') {
                    chargerPanier();
                }
            })
            .on('click', '[data-refresh-cart]', function(e) {
                e.preventDefault();
                chargerPanier();
            });
        
        // Gestion des erreurs AJAX globales avec filtrage
        $(document).ajaxError(function(event, jqxhr, settings) {
            if (settings.url.includes('/panier/') || settings.url === '/obtenir_panier_table/') {
                handleAjaxError(jqxhr);
            }
        });
    });
    
    // Expose les fonctions nécessaires globalement pour les événements HTML
    window.confirmRemove = confirmRemove;
</script>

<!-- //------------------- Récupérer l'ID de l'utilisateur Gestion Modal-----------------------------------  -->
<script>
 // Fonction pour ouvrir le modal
function openModalProduitPanier() {
    document.getElementById('modal-produit-panier').style.display = 'flex';
}

// Fermer le modal avec le bouton de fermeture
document.querySelector('.modal-produit-panier-close-btn').addEventListener('click', function() {
    document.getElementById('modal-produit-panier').style.display = 'none';
});

// Fermer le modal en cliquant en dehors
window.addEventListener('click', function(event) {
    if (event.target === document.getElementById('modal-produit-panier')) {
        document.getElementById('modal-produit-panier').style.display = 'none';
    }
});
   
</script>
<script>
const user_id = document.getElementById('user-data') ? document.getElementById('user-data').getAttribute('data-user-id') : null;

if (!user_id) {
    console.error("Utilisateur ID est manquant");
}

$(document).ready(function () {
    // Fonction pour récupérer et afficher les produits
    function chargerProduits() {
        let nom_produit = $('#modal-produit-panier-search-input').val().trim();
        let prix_min = $('#modal-produit-panier-min-price').val();
        let prix_max = $('#modal-produit-panier-max-price').val();

        console.log("🔍 Recherche de produits avec :", { nom_produit, prix_min, prix_max });

        // Afficher un indicateur de chargement en réduisant l'opacité
        $('#modal-produit-panier-product-container').css('opacity', '0.5');

        $.ajax({
            url: '/produits/recherche/' + user_id + '/',
            type: 'GET',
            data: {
                'nom': nom_produit,
                'prix_min': prix_min,
                'prix_max': prix_max
            },
            success: function (response) {
                console.log("✅ Réponse AJAX reçue :", response);

                if (response.produits_html) {
                    $('#modal-produit-panier-product-container').html(response.produits_html).css('opacity', '1');

                    // Vérifier si aucun produit n'a été retourné
                    if ($('#modal-produit-panier-product-container').html().trim() === '') {
                        $('#modal-produit-panier-product-container').html('<p>Aucun produit trouvé.</p>');
                    }
                } else {
                    console.error("⚠️ Réponse inattendue du serveur :", response);
                    alert("Une erreur s'est produite.");
                }
            },
            error: function (xhr, status, error) {
                console.error("❌ Erreur AJAX :", {
                    status: xhr.status,
                    statusText: xhr.statusText,
                    responseText: xhr.responseText
                });
                alert("Une erreur s'est produite lors du chargement des produits.");
            }
        });
    }

    // Appliquer les filtres lorsqu'on clique sur le bouton "Appliquer"
    $('.modal-produit-panier-apply-btn').on('click', function () {
        chargerProduits();
    });

    // Optionnel: Ajouter la recherche lors de la touche Entrée
    $('#modal-produit-panier-search-input').on('keypress', function(e) {
        if (e.which === 13) {
            chargerProduits();
        }
    });
});
</script>
    <script>
        // Gestion du menu mobile
        function toggleMenu() {
            const navbar = document.querySelector('.navbar');
            const navLinks = document.querySelector('.nav-links');
            const hamburger = document.querySelector('.hamburger i');
            
            navLinks.classList.toggle('active');
            navbar.classList.toggle('mobile-active');
            
            // Animation de l'icône du menu
            if (navLinks.classList.contains('active')) {
                hamburger.classList.remove('fa-bars');
                hamburger.classList.add('fa-times');
            } else {
                hamburger.classList.add('fa-bars');
                hamburger.classList.remove('fa-times');
            }
        }

        // Gestion du scroll pour la navbar
        let lastScroll = 0;
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            const currentScroll = window.pageYOffset;
            
            if (currentScroll <= 0) {
                navbar.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.1)';
                return;
            }
            
            if (currentScroll > lastScroll && !navbar.classList.contains('mobile-active')) {
                // Scroll vers le bas
                navbar.style.transform = 'translateY(-100%)';
            } else {
                // Scroll vers le haut
                navbar.style.transform = 'translateY(0)';
                navbar.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.15)';
            }
            
            lastScroll = currentScroll;
        });

        // Fermer le menu mobile lors du clic sur un lien
        document.querySelectorAll('.nav-links .nav-item').forEach(link => {
            link.addEventListener('click', () => {
                const navLinks = document.querySelector('.nav-links');
                const hamburger = document.querySelector('.hamburger i');
                if (navLinks.classList.contains('active')) {
                    navLinks.classList.remove('active');
                    document.querySelector('.navbar').classList.remove('mobile-active');
                    hamburger.classList.add('fa-bars');
                    hamburger.classList.remove('fa-times');
                }
            });
        });

   
    </script>

    <script>
        // Gestion du menu hamburger
        function toggleMenu() {
            const navMenu = document.querySelector('.nav-menu');
            const hamburgerBtn = document.querySelector('.hamburger-btn');
            
            navMenu.classList.toggle('show');
            hamburgerBtn.classList.toggle('active');
            
            // Empêcher le défilement de la page quand le menu est ouvert
            document.body.style.overflow = navMenu.classList.contains('show') ? 'hidden' : '';
        }

        // Fermer le menu mobile lors du clic sur un lien
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                const navMenu = document.querySelector('.nav-menu');
                const hamburgerBtn = document.querySelector('.hamburger-btn');
                
                if (navMenu.classList.contains('show')) {
                    navMenu.classList.remove('show');
                    hamburgerBtn.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        });

        // Fermer le menu mobile lors du redimensionnement de la fenêtre
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                const navMenu = document.querySelector('.nav-menu');
                const hamburgerBtn = document.querySelector('.hamburger-btn');
                
                navMenu.classList.remove('show');
                hamburgerBtn.classList.remove('active');
                document.body.style.overflow = '';
            }
        });
    </script>



<!-- Sidebar mobile -->

<div class="sidebar-overlay"></div>
<div class="mobile-sidebar">
    <div class="sidebar-header">
        <img src="{% if logo %}{{ logo }}{% else %}{% static 'logo2.png' %}{% endif %}" alt="Logo de la boutique" class="sidebar-logo">
        <span class="sidebar-brand">{% if shop_name %}{{ shop_name }}{% else %}Nom de la boutique{% endif %}</span>
    </div>
    
    <nav class="sidebar-nav">
        <a href="{{home_boutique}}" class="sidebar-link">
            <i class="fas fa-home"></i>
            <span>Accueil</span>
        </a>
        
        <!-- Conteneur pour les icônes like et panier -->
        <div class="icons-container">
            <a href="{% url 'likes_site' utilisateur_identifiant=utilisateur_identifiant %}" class="icon-link like-container" style="text-decoration: none;">
                <i class="fa-solid fa-heart"></i>
                <div id="sidebar-like-count" class="icon-count">0</div>
            </a>
            <a href="{% url 'panier' utilisateur_identifiant=utilisateur_identifiant %}" class="icon-link cart-container"style="text-decoration: none;">
                <i class="fa-solid fa-cart-shopping"></i>
                <div id="car-count-sidebar" class="icon-count">0</div>
            </a>
        </div>
        
        <a href="https://api.whatsapp.com/send/?phone=224{{utilisateur_numero}}" class="sidebar-link">
            <i class="fab fa-whatsapp"></i>
            <span>Contact</span>
        </a>
    </nav>

    <!-- Icône de basculement de mode dans la sidebar -->
    <div id="theme-toggle-mobile" class="theme-toggle-mobile">
        <i id="theme-icon-mobile" class="fas fa-moon"></i>
    </div>
</div>
<script>
// Gestion de la sidebar mobile
document.addEventListener('DOMContentLoaded', function() {
    const hamburgerBtn = document.querySelector('.hamburger-btn');
    const sidebar = document.querySelector('.mobile-sidebar');
    const overlay = document.querySelector('.sidebar-overlay');
    const sidebarClose = document.querySelector('.sidebar-close');
    const sidebarLinks = document.querySelectorAll('.sidebar-link');

    function toggleSidebar() {
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
        document.body.style.overflow = sidebar.classList.contains('active') ? 'hidden' : '';
    }

    hamburgerBtn.addEventListener('click', toggleSidebar);
    overlay.addEventListener('click', toggleSidebar);
    sidebarClose.addEventListener('click', toggleSidebar);

    // Fermer la sidebar lors du clic sur un lien
    sidebarLinks.forEach(link => {
        link.addEventListener('click', () => {
            toggleSidebar();
        });
    });
});
</script>


<script>
    document.addEventListener('DOMContentLoaded', function() {
        const html = document.documentElement; // On cible <html> et non <body>
        const themeToggle = document.getElementById('theme-toggle');
        const themeToggleMobile = document.getElementById('theme-toggle-mobile');
        const themeIcon = document.getElementById('theme-icon');
        const themeIconMobile = document.getElementById('theme-icon-mobile');
    
        // Vérifier le mode enregistré ou définir par défaut
        const savedTheme = localStorage.getItem('theme') || 'dark';
        html.setAttribute('data-theme', savedTheme);
        themeIcon.classList.toggle('fa-sun', savedTheme === 'light');
        themeIcon.classList.toggle('fa-moon', savedTheme === 'dark');
        if (themeIconMobile) {
            themeIconMobile.classList.toggle('fa-sun', savedTheme === 'light');
            themeIconMobile.classList.toggle('fa-moon', savedTheme === 'dark');
        }
    
        // Fonction pour basculer entre les thèmes
        function toggleTheme() {
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    
            html.setAttribute('data-theme', newTheme);
            themeIcon.classList.toggle('fa-sun', newTheme === 'light');
            themeIcon.classList.toggle('fa-moon', newTheme === 'dark');
            if (themeIconMobile) {
                themeIconMobile.classList.toggle('fa-sun', newTheme === 'light');
                themeIconMobile.classList.toggle('fa-moon', newTheme === 'dark');
            }
            localStorage.setItem('theme', newTheme);
        }
    
        // Ajouter l'événement de clic à l'icône originale
        if (themeToggle) {
            themeToggle.addEventListener('click', toggleTheme);
        }
    
        // Ajouter l'événement de clic à l'icône dans la sidebar mobile
        if (themeToggleMobile) {
            themeToggleMobile.addEventListener('click', toggleTheme);
        }
    });
</script>
<script>
   document.addEventListener("DOMContentLoaded", function () {
    // Sélectionner tous les liens dans la sidebar
    const sidebarLinks = document.querySelectorAll(".mobile-sidebar .sidebar-link");

    // Sélectionner la sidebar et l'overlay
    const mobileSidebar = document.querySelector(".mobile-sidebar");
    const sidebarOverlay = document.querySelector(".sidebar-overlay");

    // Fonction pour fermer la sidebar
    function closeSidebar() {
        mobileSidebar.classList.remove("active");
        sidebarOverlay.classList.remove("active");
        document.body.style.overflow = "auto"; // Réactiver le scroll sur le body
    }

    // Ajouter un écouteur d'événements à chaque lien
    sidebarLinks.forEach(link => {
        link.addEventListener("click", function (e) {
            // Empêcher le comportement par défaut si nécessaire
            e.preventDefault();

            // Fermer la sidebar
            closeSidebar();

            // Rediriger vers l'URL du lien après un court délai (optionnel)
            setTimeout(() => {
                window.location.href = link.href;
            }, 300); // 300ms de délai pour la fermeture de la sidebar
        });
    });

    // Fermer la sidebar en cliquant sur l'overlay (optionnel)
    sidebarOverlay.addEventListener("click", closeSidebar);
});
</script>
</body>
</html>
